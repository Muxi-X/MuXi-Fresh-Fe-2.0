(()=>{"use strict";var e={7622:function(e,s,a){var t,l,r,i=a(5893),n=a(745),o=a(9655),c=a(9250),d=a(3632),m=a(7294);let u="/api/v2";async function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],t=new Headers({"Content-Type":"application/json;charset=utf-8"});if(a){let e=localStorage.getItem("token");e?t.append("Authorization",e):d.ZP.error("未登录！")}let l=await fetch(`${u}${e}`,{method:"POST",headers:t,body:JSON.stringify(s)});if(!l.ok){if(401===l.status)throw Error("401");else if(400===l.status){let e=await l.json();throw Error(`${e.code}`)}}return l.json()}async function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=new Headers({"Content-Type":"application/json;charset=utf-8"});if(s){let e=localStorage.getItem("token");e?a.append("Authorization",e):d.ZP.error("未登录！")}let t=await fetch(`${u}${e}`,{method:"GET",headers:a,redirect:"follow"});if(!t.ok){if(401===t.status)throw Error("401");else if(400===t.status){let e=await t.json();throw Error(`${e.code}`)}}return t.json()}async function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],t=new Headers({"Content-Type":"application/json;charset=utf-8"});if(a){let e=localStorage.getItem("token");e?t.append("Authorization",e):d.ZP.error("未登录！")}let l=await fetch(`${u}${e}`,{method:"PUT",headers:t,body:JSON.stringify(s)});if(!l.ok){if(401===l.status)throw Error("401");else if(400===l.status){let e=await l.json();throw Error(`${e.code}`)}}return l.json()}async function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,t=new Headers({"Content-Type":"application/json;charset=utf-8"});a?t.append("Authorization",a):d.ZP.error(" 未登录！");let l=await fetch(`${u}${e}`,{method:"POST",headers:t,body:JSON.stringify(s)});if(!l.ok)throw Error(`${l.status}`);return l.json()}var p=a(4793),g=a(205),f=a(7584),b=a(4614),N=a(1689),w=a(4393);let y=e=>{let{header:s,user_type:a,changeUserIdentity:t}=e,[l,r]=(0,m.useState)(""),n=()=>{r("")},[o,c]=(0,m.useState)(!1);return(0,i.jsxs)(f.Z.Compact,{style:{width:"100%",marginTop:"10px"},children:[(0,i.jsx)(b.Z,{placeholder:`\u{8BF7}\u{8F93}\u{5165}\u{90AE}\u{7BB1}\u{6DFB}\u{52A0}\u{6210}\u{5458}`,value:l,onChange:e=>{r(e.target.value)},allowClear:!0}),(0,i.jsx)(N.Z,{title:`\u{6DFB}\u{52A0}${s}`,description:`\u{786E}\u{5B9A}\u{5C06}\u{8FD9}\u{4E2A}\u{4EBA}\u{8BBE}\u{7F6E}\u{4E3A}${s}\u{5417}\u{FF1F}`,open:o,onOpenChange:e=>{if(!e)return void c(e);""!==l&&c(e)},onConfirm:()=>{t(l,a,s),n()},onCancel:n,okText:"Yes",cancelText:"No",children:(0,i.jsx)(w.ZP,{type:"primary",children:"确定"})})]})},k=e=>{let{header:s,dataSource:a,loading:t,user_type:l,changeUserIdentity:r}=e;return(0,i.jsx)(p.Z,{header:(0,i.jsxs)("div",{className:"adminListHeader",children:[(0,i.jsx)("b",{children:s}),(0,i.jsx)(y,{header:s,user_type:l,changeUserIdentity:r})]}),bordered:!0,className:"adminLists",loading:t,style:{width:"20vw"},pagination:{position:"bottom",align:"center",pageSize:6,showSizeChanger:!1,size:"small"},dataSource:a,renderItem:e=>(0,i.jsx)(p.Z.Item,{className:"adminList",children:(0,i.jsx)(p.Z.Item.Meta,{avatar:(0,i.jsx)(g.C,{src:e.avatar}),title:e.nickname,description:(0,i.jsxs)("div",{children:[e.name,(0,i.jsx)("br",{}),e.email]})})})})};var _=a(5037),Z=((t={}).Backend="Backend",t.Design="Design",t.Frontend="Frontend",t.Product="Product",t),C=((l={}).Spring="spring",l.Autumn="autumn",l);let S=()=>new Date().getMonth()+1<9?C.Spring:C.Autumn,P={[C.Spring]:"春招",[C.Autumn]:"秋招"},F=(e,s)=>({value:`${e}${s}`,label:`${e}\u{5E74}${P[s]}`}),$=e=>{let{changeYear:s}=e,a=(0,m.useMemo)(()=>(()=>{let e=new Date().getFullYear(),s=S(),a=[];for(let s=e-1;s>e-4;s--)a=a.concat([F(s,C.Autumn),F(s,C.Spring)]);return a.unshift(F(e,C.Spring)),s===C.Autumn&&a.unshift(F(e,C.Autumn)),a})(),[]),t=(0,m.useCallback)(e=>{s(e)},[s]);return(0,i.jsx)("div",{className:"reviewYear",children:a&&(0,i.jsx)(_.Z,{defaultValue:a[0].label,style:{width:"80%"},onSelect:e=>{t(e)},options:a})})};var B=a(4810),E=a(1756);let M=e=>{let{reviewFilter:s,changeGroup:a}=e,t=(0,m.useMemo)(()=>[Z.Product,Z.Frontend,Z.Backend,Z.Design],[]),l={Backend:"后端组",Design:"设计组",Frontend:"前端组",Product:"产品组"},[r,n]=(0,m.useState)(s.group),o=(0,m.useCallback)(e=>{n(e),a(e)},[a]);return(0,i.jsxs)("div",{className:"reviewGroupSelect",children:[(0,i.jsx)("div",{className:"reviewGroupSelectTitle",children:"成员分组"}),(0,i.jsx)(B.ZP,{theme:{components:{Menu:{itemHeight:76}}},children:(0,i.jsx)(E.Z,{mode:"inline",selectedKeys:[r],onClick:e=>o(e.key),items:t.map(e=>({key:e,title:l[e],label:(0,i.jsx)("div",{className:"reviewGroups",children:l[e]})})),style:{height:"400px"}})})]})};var D=((r={}).male="男",r.female="女",r),q=a(3525);let z=e=>{let{reviewList:s,loading:a}=e,[t,l]=(0,m.useState)(s),[r,n]=(0,m.useState)(""),[c,u]=(0,m.useState)(s);(0,m.useEffect)(()=>{l(s),u(s)},[s]);let h=(0,m.useRef)(null),v=(0,m.useCallback)(e=>{if(!e.trim())return void u(t);u(t.filter(s=>{let a=e.toLowerCase();return s.name.toLowerCase().includes(a)||s.school.toLowerCase().includes(a)||s.grader.toLowerCase().includes(a)||s.group.toLowerCase().includes(a)||D[s.gender].toLowerCase().includes(a)}))},[t]),j=(0,m.useCallback)(e=>{n(e),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{v(e)},300)},[v]),p=(0,m.useCallback)(e=>{n(e),h.current&&clearTimeout(h.current),v(e)},[v]);(0,m.useEffect)(()=>{v(r)},[t,v,r]),(0,m.useEffect)(()=>()=>{h.current&&clearTimeout(h.current)},[]);let g=(0,m.useMemo)(()=>t&&[...new Set(t.map(e=>e.grader))].map(e=>({text:e,value:e})),[t]),f=(0,m.useMemo)(()=>t&&[...new Set(t.map(e=>e.gender))].map(e=>({text:D[e],value:e})),[t]),N=(0,m.useMemo)(()=>t&&[...new Set(t.map(e=>e.school))].map(e=>({text:e,value:e})),[t]),w=(0,m.useMemo)(()=>t&&[...new Set(t.map(e=>e.group))].map(e=>({text:e,value:e})),[t]),y=(0,m.useMemo)(()=>t&&[...new Set(t.map(e=>e.admission_status))].map(e=>({text:e,value:e})),[t]),[k,Z]=(0,m.useState)({}),[C,S]=(0,m.useState)({}),[P,F]=(0,m.useState)(1);(0,m.useEffect)(()=>{Z({}),S({}),F(1)},[s]);let $=[{title:"姓名",dataIndex:"name",key:"name",sorter:(e,s)=>e.name.localeCompare(s.name,"zh-CN"),sortOrder:"name"===C.columnKey?C.order:null},{title:"性别",dataIndex:"gender",key:"gender",filters:f,filteredValue:k.gender||null,onFilter:(e,s)=>s.gender===e,filterSearch:!1,render:(e,s)=>D[s.gender]},{title:"年级",dataIndex:"grader",key:"grader",filters:g,filteredValue:k.grader||null,onFilter:(e,s)=>0===s.grader.indexOf(e),filterSearch:!0,sorter:(e,s)=>Number(e.grader)-Number(s.grader),sortOrder:"grader"===C.columnKey?C.order:null},{title:"学院",dataIndex:"school",key:"school",filters:N,filteredValue:k.school||null,onFilter:(e,s)=>0===s.school.indexOf(e),filterSearch:!0,sorter:(e,s)=>e.school.localeCompare(s.school,"zh-CN"),sortOrder:"school"===C.columnKey?C.order:null},{title:"组别",dataIndex:"group",key:"group",filters:w,filteredValue:k.group||null,onFilter:(e,s)=>0===s.group.indexOf(e),filterSearch:!0,sorter:(e,s)=>e.school.localeCompare(s.school,"zh-CN"),sortOrder:"group"===C.columnKey?C.order:null},{title:"报名表",dataIndex:"form_id",key:"form_id",render:(e,s)=>(0,i.jsx)(o.rU,{to:`/app/form/${s.user_id}/${s.form_id}`,target:"_blank",children:"查看报名表"})},{title:"面试评价",key:"interview_evaluation",render:(e,s)=>(0,i.jsx)(o.rU,{to:`https://forum.muxistudio.xyz/quicknew?title=${s.name}\u{9762}\u{8BD5}\u{8BC4}\u{4EF7}`,target:"_blank",children:"去填写面评"})},{title:"录取状态",dataIndex:"admission_status",key:"admission_status",filters:y,filteredValue:k.admission_status||null,onFilter:(e,s)=>0===s.admission_status.indexOf(e),filterSearch:!0,sorter:(e,s)=>e.admission_status.localeCompare(s.admission_status,"zh-CN"),sortOrder:"admission_status"===C.columnKey?C.order:null},{title:"操作",key:"action",render:(e,s)=>(0,i.jsx)(_.Z,{defaultValue:s.admission_status,style:{width:"80%"},onSelect:e=>{B(e,s.schedule_id)},options:[{value:"已报名",label:"已报名"},{value:"实习期",label:"实习期"},{value:"已转正",label:"已转正"}]})}],B=(0,m.useCallback)((e,s)=>{x("/review/admission_status",{schedule_id:s,new_status:e}).then(()=>{d.ZP.success("录取状态更新成功").then(()=>{l(a=>a.map(a=>a.schedule_id===s?{...a,admission_status:e}:a))},e=>{console.error(e)})},e=>{d.ZP.error("录取状态更新失败，请稍后重试"),console.error(e)})},[l]);return(0,i.jsxs)("div",{className:"review-table-container",children:[(0,i.jsx)("div",{className:"search-container",children:(0,i.jsx)(b.Z.Search,{placeholder:"搜索姓名、学院、年级、组别...",allowClear:!0,value:r,onChange:e=>j(e.target.value),onSearch:p,style:{width:300},enterButton:"搜索"})}),(0,i.jsx)(q.Z,{bordered:!0,loading:a,columns:$,dataSource:c,onChange:(e,s,a)=>{console.log(s),Z(s),S(a),F(e.current)},pagination:{position:["bottomCenter"],pageSize:10,showSizeChanger:!1,current:P},rowKey:e=>e.schedule_id})]})};var I=a(7183),O=a(5597);let{Header:L,Content:T,Sider:A}=I.Z,U="https://muxi-fresh.muxixyz.com/fe-static/default_avatar.png",Q=e=>{let{identity:s,isForm:a}=e,[t,l]=(0,m.useState)(U),[r,n]=(0,m.useState)("/app/form");(0,m.useEffect)(()=>{h("/users/my-info").then(e=>{let{avatar:s}=e.data;l(s)},e=>{console.error(e)})},[]);let o=(0,c.s0)(),u=(0,c.TH)(),x=e=>{n(e),o(e)},v=[{label:(0,i.jsx)("div",{onClick:()=>{x("/app/home")},children:"个人主页"}),key:"/app/home"},{label:(0,i.jsx)("div",{onClick:()=>{localStorage.removeItem("token"),d.ZP.success("退出登录成功"),o("/login")},children:"退出登录"}),key:"logout"}],j=e=>{console.log("value",e),r!=e&&n(e)},p=[{key:"/app/form",title:"报名表",label:(0,i.jsxs)("div",{className:"layoutLink",onClick:()=>j("/app/form"),children:[(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/baomingbiao%404x%20%281%29.png",alt:"报名表",style:{width:20,marginRight:4}}),"报名表"]})},{key:"/app/progress",title:"进度查询",label:(0,i.jsxs)("div",{className:"layoutLink",onClick:()=>j("/app/progress"),children:[(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E8%BF%9B%E5%BA%A6%E6%9F%A5%E8%AF%A2%404x.png",alt:"进度查询",style:{width:25,marginRight:4}}),"进度查询"]})},"已交表"===a?{key:"/app/homework",title:"作业",label:(0,i.jsxs)("div",{className:"layoutLink",children:[(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E5%AE%B9%E5%99%A8%404x%20%282%29.png",alt:"作业",style:{width:25,marginRight:4}}),"作业"]}),children:"super_admin"===s||"admin"===s?[{key:"/app/homework/admin/new",title:"新作业",label:(0,i.jsx)("div",{className:"layoutLinkTest",style:{fontSize:"1vw"},onClick:()=>j("/app/homework"),children:"新作业"})},{key:"/app/homework/admin/edit",title:"修改作业",label:(0,i.jsx)("div",{className:"layoutLinkTest",style:{fontSize:"1vw"},onClick:()=>j("/app/homework"),children:"修改作业"})},{key:"/app/homework/admin/browse",title:"查看作业",label:(0,i.jsx)("div",{className:"layoutLinkTest",style:{fontSize:"1vw"},onClick:()=>j("/app/homework"),children:"查看作业"})}]:[{key:"/app/homework/user/submit",title:"提交作业",label:(0,i.jsx)("div",{className:"layoutLinkTest",style:{fontSize:"1vw"},onClick:()=>j("/app/homework"),children:"提交作业"})}]}:{key:"/app/homework/visitor",title:"作业",label:(0,i.jsx)("div",{className:"layoutLink",children:"作业"})},"super_admin"===s||"admin"===s?{key:"/app/review",title:"审阅",label:(0,i.jsxs)("div",{className:"layoutLink",onClick:()=>j("/app/authority-manage"),children:[(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E5%AE%A1%E9%98%85%404x.png",alt:"审阅",style:{width:25,marginRight:4}}),"审阅"]})}:null,"super_admin"===s||"admin"===s?{key:"/app/authority-manage",title:"权限管理",label:(0,i.jsxs)("div",{className:"layoutLink",children:[(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E5%AE%B9%E5%99%A8%404x%20%283%29.png",alt:"权限管理",style:{width:25,marginRight:4}}),"权限管理"]})}:null];return(0,i.jsxs)("div",{className:"layout",children:[(0,i.jsxs)(L,{style:{display:"flex",alignItems:"center",width:"100vw",backgroundColor:"#ffffff",justifyContent:"space-between",paddingLeft:0},children:[(0,i.jsx)("div",{className:"layoutLogoBox",children:(0,i.jsx)("div",{className:"layoutLogo",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E5%B7%A6%E4%B8%8A%E8%A7%92%401x%281%29.png",alt:"logo"})})}),(0,i.jsx)(O.Z,{menu:{items:v},placement:"bottom",children:(0,i.jsx)(g.C,{src:t||U,size:"large",alt:"avatar"})})]}),(0,i.jsx)(A,{width:"10vw",children:(0,i.jsx)("div",{className:"layoutSidebar",children:(0,i.jsx)(B.ZP,{theme:{token:{colorBgContainer:"#ffb841"},components:{Menu:{itemSelectedBg:"#ffaf24",itemSelectedColor:"#fffacc",itemColor:"#fffacc",itemHeight:60}}},children:(0,i.jsx)(E.Z,{mode:"inline",selectedKeys:[u.pathname],items:p,onSelect:e=>{x(e.key)},style:{minWidth:0,flex:"auto",borderInlineEnd:0}})})})}),(0,i.jsx)(T,{children:(0,i.jsx)("div",{className:"layoutBox",children:(0,i.jsx)("div",{className:"layoutContent",children:(0,i.jsx)(c.j3,{})})})})]})};var Y=a(5518),H=a(3176),R=a(2534),V=a(7386),W=a(489),G=a(8148);let K="https://muxi-fresh.muxixyz.com/fe-static/defaultAvatar.png",J=()=>{let[e,s]=(0,m.useState)(K),[a,t]=(0,m.useState)("");(0,m.useEffect)(()=>{h("/users/my-info").then(e=>{let{avatar:a,name:l}=e.data;s(a),t(l)},e=>{d.ZP.error("获取个人信息失败，请稍后重试"),console.error(e)})},[]);let l=(0,c.s0)(),r=e=>{l(e)},n=[{label:(0,i.jsxs)("div",{onClick:()=>{r("/app/home")},children:[(0,i.jsx)(V.Z,{}),"\xa0 个人主页"]}),key:"/app/home"},{label:(0,i.jsxs)("div",{onClick:()=>{localStorage.removeItem("token"),d.ZP.success("退出登录成功"),l("/login")},children:[(0,i.jsx)(W.Z,{}),"\xa0 退出登录"]}),key:"logout"}];return(0,i.jsx)(B.ZP,{theme:{token:{colorBgContainer:"#FFC93F"},components:{Layout:{colorBgBody:"transparent"}}},children:(0,i.jsxs)(I.Z,{className:"mobileLayout",children:[(0,i.jsxs)(R.h4,{className:"mobileLayoutHeader",children:[(0,i.jsxs)("div",{className:"mobileLayoutHeaderBox",children:[(0,i.jsx)(g.C,{src:e||K,size:"large",alt:"avatar"}),(0,i.jsx)("div",{children:a})]}),(0,i.jsx)(O.Z,{menu:{items:n},placement:"bottom",children:(0,i.jsx)(G.Z,{})})]}),(0,i.jsxs)(R.VY,{className:"mobileLayoutContent",children:[(0,i.jsx)("div",{className:"mobileLayoutContentImg",children:(0,i.jsx)(H.Z,{src:"https://muxi-fresh.muxixyz.com/fe-static/homepage-background.png",width:"80vw",preview:!1})}),(0,i.jsxs)("div",{className:"mobileLayoutContentBox",children:[(0,i.jsxs)("div",{className:"mobileLayoutContentBoxs",onClick:()=>{r("/app/form")},children:[(0,i.jsx)(H.Z,{src:"https://muxi-fresh.muxixyz.com/fe-static/registration-form.png",width:"20vw",preview:!1}),"报名表"]}),(0,i.jsxs)("div",{className:"mobileLayoutContentBoxs",onClick:()=>{r("/app/progress")},children:[(0,i.jsx)(H.Z,{src:"https://muxi-fresh.muxixyz.com/fe-static/progress-query.png",width:"20vw",preview:!1}),"进度查询"]}),(0,i.jsxs)("div",{className:"mobileLayoutContentBoxs",onClick:()=>{r("/app/homework/user/submit")},children:[(0,i.jsx)(H.Z,{src:"https://muxi-fresh.muxixyz.com/fe-static/submit.png",width:"20vw",preview:!1}),"提交作业"]})]})]})]})})},X=()=>localStorage.getItem("token")?(0,i.jsx)(ee,{}):(d.ZP.error("未登录，请先登录"),(0,i.jsx)(c.Fg,{to:"/login",replace:!0,state:{message:"未登录，请先登录"}})),ee=()=>{let[e,s]=(0,m.useState)("freshman"),[a,t]=(0,m.useState)("未交表"),[l,r]=(0,m.useState)(null);return((0,m.useEffect)(()=>{h("/form/judge").then(e=>{let{user_type:a,form_status:l}=e.data;s(a),t(l)}).catch(e=>{r(Number(e.message))})},[]),401===l)?(d.ZP.error("登录已过期，请重新登录"),(0,i.jsx)(c.Fg,{to:"/login",replace:!0,state:{message:"登录已过期，请重新登录"}})):Y.isDesktop?(0,i.jsx)(Q,{identity:e,isForm:a}):(0,i.jsx)(J,{})};var es=a(2590),ea=a(1885),et=a(8519),el=a(1286);let er=[{value:"计算机学院",label:"计算机学院"},{value:"信息管理学院",label:"信息管理学院"},{value:"人工智能教育学部",label:"人工智能教育学部"},{value:"美术学院",label:"美术学院"},{value:"公共管理学院",label:"公共管理学院"},{value:"教育学院",label:"教育学院"},{value:"马克思主义学院",label:"马克思主义学院"},{value:"生命科学学院",label:"生命科学学院"},{value:"外国语学院",label:"外国语学院"},{value:"心理学院",label:"心理学院"},{value:"音乐学院",label:"音乐学院"},{value:"城市与环境科学学院",label:"城市与环境科学学院"},{value:"化学学院",label:"化学学院"},{value:"经济与工商管理学院",label:"经济与工商管理学院"},{value:"数学与统计学学院",label:"数学与统计学学院"},{value:"文学院",label:"文学院"},{value:"新闻传播学院",label:"新闻传播学院"},{value:"政治与国际关系学院",label:"政治与国际关系学院"},{value:"法学院",label:"法学院"},{value:"历史文化学院",label:"历史文化学院"},{value:"社会学院",label:"社会学院"},{value:"体育学院",label:"体育学院"},{value:"物理科学与技术学院",label:"物理科学与技术学院"}];var ei=a(866);let en=e=>{let{changeEditState:s}=e,[a,t]=(0,m.useState)({avatar:"",name:"",nickname:"",school:"",email:"",group:"",student_id:"",qq:""}),[l,r]=(0,m.useState)(!0),[n,o]=(0,m.useState)(""),[c,u]=(0,m.useState)(""),[v,j]=(0,m.useState)(!1),[p,g]=(0,m.useState)(""),[f,N]=(0,m.useState)(""),[w,y]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{h("/users/my-info",!0).then(e=>{let{data:s}=e;t(s),r(!1)},e=>{console.error(e),d.ZP.error("获取个人信息失败，请重试")})},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"detail-info-box",children:[(0,i.jsxs)("div",{className:"name-box",children:[(0,i.jsx)("div",{className:"box-title",children:"姓名:"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("div",{className:"box-content",children:a.name||"待补充"})]}),(0,i.jsxs)("div",{className:"nickName-box",children:[(0,i.jsx)("div",{className:"box-title",children:"昵称:"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("div",{className:"box-content",children:a.nickname||"待补充"})]}),(0,i.jsxs)("div",{className:"college-box",children:[(0,i.jsx)("div",{className:"box-title",children:"学院:"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("div",{className:"box-content",children:a.school||"待补充"})]}),(0,i.jsxs)("div",{className:"group-box",children:[(0,i.jsx)("div",{className:"box-title",children:"组别:"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("div",{className:"box-content",children:a.group||"待补充"})]}),(0,i.jsxs)("div",{className:"account-box",children:[(0,i.jsx)("div",{className:"box-title",children:"学号:"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("div",{className:"box-content",children:a.student_id||"未绑定"}),(0,i.jsx)("div",{className:"change-btn",onClick:()=>{y(!0)},children:"修改"})]}),(0,i.jsxs)("div",{className:"email-box",children:[(0,i.jsx)("div",{className:"box-title",children:"邮箱:"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("div",{className:"box-content",children:a.email}),(0,i.jsx)("div",{className:"change-btn",onClick:()=>{j(!0)},children:"修改"})]}),(0,i.jsxs)("div",{className:"qq-box",children:[(0,i.jsx)("div",{className:"box-title",children:"QQ:"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("div",{className:"box-content",children:a.qq||"待补充"})]}),(0,i.jsx)("div",{className:"change-info-btn",onClick:s,children:"个人信息"})]}),(0,i.jsxs)(es.Z,{className:"email-modal",open:v,onOk:()=>{x("/auth/email",{email:n,verify_code:c},!0).then(e=>{200===e.code?(t({...a,email:n}),e.data.flag&&d.ZP.success("邮箱绑定成功！")):d.ZP.error("邮箱绑定失败，请重试！"),o(""),u("")},e=>{console.error(e),d.ZP.error("邮箱绑定失败，请重试！"),o(""),u("")}),j(!1)},onCancel:()=>{j(!1),o(""),u("")},okText:"确认",cancelText:"取消",children:[(0,i.jsxs)("div",{className:"email-box",children:[(0,i.jsx)("div",{className:"box-label",children:"新邮箱:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>o(e.target.value),value:n,type:"email",placeholder:"请输入邮箱"})]}),(0,i.jsxs)("div",{className:"verifyCode-box",children:[(0,i.jsx)("div",{className:"box-label",children:"验证码:"}),(0,i.jsx)(b.Z,{className:"input-field",value:c,onChange:e=>u(e.target.value)}),(0,i.jsx)("div",{className:"get-verifyCode-btn",onClick:()=>{x("/auth/send-verification-code",{email:n,type:"set_email"},!1).then(e=>{let{flag:s}=e.data;s&&d.ZP.success("验证码已发送！")},e=>{console.error(e),d.ZP.error("获取验证码失败，请重试")})},children:"获取验证码"})]})]}),(0,i.jsxs)(es.Z,{className:"studentId-modal",open:w,onOk:()=>{x("/auth/set-student-id",{student_id:p,password:f},!0).then(e=>{200===e.code?(t({...a,student_id:p}),e.data.flag&&d.ZP.success("学号绑定成功！"),g("")):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`),N("")},e=>{console.error(e),d.ZP.error("学号绑定失败，请重试！"),N("")}),y(!1)},onCancel:()=>{y(!1),g(""),N("")},okText:"确认",cancelText:"取消",children:[(0,i.jsxs)("div",{className:"studentId-box",children:[(0,i.jsx)("div",{className:"box-label",children:"学号:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>g(e.target.value),value:p,placeholder:"请输入学号"})]}),(0,i.jsxs)("div",{className:"password-box",children:[(0,i.jsx)("div",{className:"box-label",children:"密码:"}),(0,i.jsx)(b.Z.Password,{className:"input-field",value:f,onChange:e=>N(e.target.value),placeholder:"请输入一站式密码"})]})]})]})},eo=e=>{let{changeEditState:s}=e,[a,t]=(0,m.useState)({avatar:"",name:"",nickname:"",school:"",email:"",group:"",student_id:"",qq:""}),[l,r]=(0,m.useState)(""),[n,o]=(0,m.useState)(""),[c,u]=(0,m.useState)(!1),[v,j]=(0,m.useState)(""),[p,g]=(0,m.useState)(""),[f,N]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{h("/users/my-info",!0).then(e=>{let{data:s}=e;t(s)},e=>{console.error(e),d.ZP.error("获取个人信息失败，请重试")})},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"detail-info-box-edit",children:[(0,i.jsxs)("div",{className:"name-box",children:[(0,i.jsx)("div",{className:"box-title",children:"姓名:"}),(0,i.jsx)(b.Z,{className:"box-content",onChange:e=>(e=>{let s=e.target.value;t({...a,name:s})})(e),value:a.name,placeholder:"请补充姓名"})]}),(0,i.jsxs)("div",{className:"nickName-box",children:[(0,i.jsx)("div",{className:"box-title",children:"昵称:"}),(0,i.jsx)(b.Z,{className:"box-content",onChange:e=>(e=>{let s=e.target.value;t({...a,nickname:s})})(e),value:a.nickname,placeholder:"请补充昵称"})]}),(0,i.jsxs)("div",{className:"college-box",children:[(0,i.jsx)("div",{className:"box-title",children:"学院:"}),(0,i.jsx)(_.Z,{className:"box-content",defaultValue:"计算机学院",value:a.school,options:er,onChange:e=>{t({...a,school:e})}})]}),(0,i.jsxs)("div",{className:"group-box",children:[(0,i.jsx)("div",{className:"box-title",children:"组别:"}),(0,i.jsx)(_.Z,{className:"box-content",defaultValue:"请选择组别",value:a.group,options:[{value:"Product",label:"产品组"},{value:"Design",label:"设计组"},{value:"Frontend",label:"前端组"},{value:"Backend",label:"后端组"}],onChange:e=>{t({...a,group:e})}})]}),(0,i.jsxs)("div",{className:"account-box",children:[(0,i.jsx)("div",{className:"box-title",children:"学号:"}),(0,i.jsx)("div",{className:"box-content",children:a.student_id||"未绑定"}),(0,i.jsx)("div",{className:"change-btn",onClick:()=>{N(!0)},children:"修改"})]}),(0,i.jsxs)("div",{className:"email-box",children:[(0,i.jsx)("div",{className:"box-title",children:"邮箱:"}),(0,i.jsx)("div",{className:"box-content",children:a.email}),(0,i.jsx)("div",{className:"change-btn",onClick:()=>{u(!0)},children:"修改"})]}),(0,i.jsxs)("div",{className:"qq-box",children:[(0,i.jsx)("div",{className:"box-title",children:"QQ:"}),(0,i.jsx)(b.Z,{className:"box-content",onChange:e=>(e=>{let s=e.target.value;t({...a,qq:s})})(e),value:a.qq,placeholder:"请补充QQ"})]}),(0,i.jsx)("div",{className:"change-info-btn",onClick:()=>{x("/users/",{avatar:a.avatar,name:a.name,nickname:a.nickname,school:a.school,qq:a.qq},!0).then(e=>{200===e.code?(d.ZP.success("修改信息成功！"),s()):d.ZP.success("修改信息失败，请重试！")},e=>{console.error(e),d.ZP.success("修改信息失败，请重试！")})},children:"确认修改"})]}),(0,i.jsxs)(es.Z,{className:"email-modal",open:c,onOk:()=>{x("/auth/email",{email:l,verify_code:n},!0).then(e=>{200===e.code?(t({...a,email:l}),e.data.flag&&d.ZP.success("邮箱绑定成功！")):d.ZP.error("邮箱绑定失败，请重试！"),r(""),o("")},e=>{console.error(e),d.ZP.error("邮箱绑定失败，请重试！"),r(""),o("")}),u(!1)},onCancel:()=>{u(!1),r(""),o("")},okText:"确认",cancelText:"取消",children:[(0,i.jsxs)("div",{className:"email-box",children:[(0,i.jsx)("div",{className:"box-label",children:"新邮箱:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>r(e.target.value),value:l,type:"email",placeholder:"请输入邮箱"})]}),(0,i.jsxs)("div",{className:"verifyCode-box",children:[(0,i.jsx)("div",{className:"box-label",children:"验证码:"}),(0,i.jsx)(b.Z,{className:"input-field",value:n,onChange:e=>o(e.target.value)}),(0,i.jsx)("div",{className:"get-verifyCode-btn",onClick:()=>{x("/auth/send-verification-code",{email:l,type:"set_email"},!1).then(e=>{let{flag:s}=e.data;s&&d.ZP.success("验证码已发送！")},e=>{console.error(e),d.ZP.error("获取验证码失败，请重试")})},children:"获取验证码"})]})]}),(0,i.jsxs)(es.Z,{className:"studentId-modal",open:f,onOk:()=>{x("/auth/set-student-id",{student_id:v,password:p},!0).then(e=>{200===e.code?(t({...a,student_id:v}),e.data.flag&&d.ZP.success("学号绑定成功！")):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`),j(""),g("")},e=>{console.error(e),d.ZP.error("学号绑定失败，请重试！"),j(""),g("")}),N(!1)},onCancel:()=>{N(!1),j(""),g("")},okText:"确认",cancelText:"取消",children:[(0,i.jsxs)("div",{className:"studentId-box",children:[(0,i.jsx)("div",{className:"box-label",children:"学号:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>j(e.target.value),value:v,placeholder:"请输入学号"})]}),(0,i.jsxs)("div",{className:"password-box",children:[(0,i.jsx)("div",{className:"box-label",children:"密码:"}),(0,i.jsx)(b.Z.Password,{className:"input-field",value:p,onChange:e=>g(e.target.value),placeholder:"请输入一站式密码"})]})]})]})},ec=()=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"homework-wrap",children:(0,i.jsx)(c.j3,{})})}),ed=e=>{let{title:s,className:a,extra:t,deadline:l,...r}=e,n=null==s?void 0:s.length;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:`upload-title ${a}`,...r,children:[(0,i.jsxs)("div",{className:"upload-title-text",style:{width:`${1.4*n}vw`},children:[s,t]}),(0,i.jsx)("div",{className:"upload-title-deco",style:{width:`${1.4*n}vw`}}),l&&(0,i.jsxs)("div",{className:"deadline",children:["作业截止时间： ",l]})]})})},em=e=>{let{title:s,className:a,data:t,onChange:l,...r}=e,[n,o]=(0,m.useState)(t[0]);return(0,m.useEffect)(()=>{l&&l(t[0])},[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"selector-wrap "+a,...r,children:[(0,i.jsx)("div",{className:"selector-title",children:(0,i.jsx)("div",{className:"selector-title-text",children:s})}),t.map((e,s)=>(0,i.jsx)("li",{className:e.value===n.value?"selector-item selected":"selector-item",onClick:()=>{l&&l(e),o(e)},children:(0,i.jsx)("div",{className:"selector-item-text",children:e.key})},`${e.value} ${s.toString()}`))]})})};var eu=a(7043),ex=a(6935),eh=a(2522);let ev=[{key:"产品组",value:"Product"},{key:"设计组",value:"Design"},{key:"前端组",value:"Frontend"},{key:"后端组",value:"Backend"}],ej="https://ossfresh-test.muxixyz.com/",{Meta:ep}=eu.Z,eg=e=>{let{info:s,getSubmittionID:a}=e,[t,l]=(0,m.useState)(!0),[r,n]=(0,m.useState)(""),[o,c]=(0,m.useState)([""]),[d,u]=(0,m.useState)({title_text:"",content:"",urls:[]});return(0,m.useEffect)(()=>{console.log(s,s.version-1),ev.forEach(e=>{e.value==(null==s?void 0:s.group)&&n(e.key)}),(null==s?void 0:s.task_id)&&h(`/task/assigned/${null==s?void 0:s.task_id}`).then(e=>{u(e.data),h(`/task/submitted?user_id=${null==s?void 0:s.user_id}&assigned_task_id=${null==s?void 0:s.task_id}`).then(e=>{c(e.data.submission_infos.length>0?e.data.submission_infos[s.version-1].urls:[]),a&&a(e.data.submission_infos.length>0?e.data.submission_infos[s.version-1].submission_id:"")},null)},null),l(!t)},[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eu.Z,{className:"homePreview-wrap",style:{overflowY:"auto"},title:(0,i.jsx)(ed,{title:`${r}\u{4F5C}\u{4E1A}`,style:{marginLeft:"0"},children:"评论区"}),loading:t,children:(0,i.jsxs)("div",{className:"homePreview-card",children:[(0,i.jsx)(ef,{tag_name:"作业描述",children:(0,i.jsx)("div",{className:"description-card",children:null==d?void 0:d.title_text})}),(0,i.jsx)(ef,{tag_name:"提交人",children:(0,i.jsx)(eu.Z,{className:"uploader-card",children:(0,i.jsx)(ep,{avatar:(0,i.jsx)(g.C,{src:(null==s?void 0:s.avatar)?null==s?void 0:s.avatar:"https://xsgames.co/randomusers/avatar.php?g=pixel"}),title:null==s?void 0:s.name,description:null==s?void 0:s.email})})}),(0,i.jsx)(ef,{tag_name:"作业概述",children:(0,i.jsx)("div",{className:"description-card",style:{height:"30vh"},children:d.content.replace(/\n/gi,`\r
`)})}),(0,i.jsx)(ey,{data:d.urls}),(0,i.jsx)(ey,{data:o,title:"作业内容"})]})})})},ef=e=>{let{tag_name:s,children:a,className:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:`tag-wrap ${t}`,children:[(0,i.jsx)("div",{className:"tag-name",children:s}),(0,i.jsx)("div",{className:"tag-content",children:a})]})})};var eb=a(6607),eN=a(6447);let ew=e=>{let{data:s,innerClass:a,preview:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:a,children:[s&&s.map((e,s)=>{var a;return(0,i.jsxs)(p.Z.Item,{className:t?"file-pre":"file",children:[t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{className:"file-preview",src:"https://s2.loli.net/2023/08/10/Wbg5lrvECMwHPSt.png",alt:""}),(0,i.jsxs)("span",{className:"file-success",children:[(0,i.jsx)("img",{alt:"",src:"https://s2.loli.net/2023/08/19/zTWilhg63dH8ING.png"}),"已上传"]})]}):(0,i.jsx)(eb.Z,{className:"file-icon"}),(0,i.jsx)("a",{className:"file-text",onClick:e=>e.stopPropagation(),target:"_blank",href:e,download:!0,children:e&&((null==(a=e.split("--")[1]?e.split("--")[1]:`file-${s}`)?void 0:a.length)>8?a.slice(0,8)+"...":a)})]},e)}),!s&&(0,i.jsxs)("div",{className:"empty-files",children:[(0,i.jsx)(eN.Z,{}),(0,i.jsx)("div",{className:"empty-files-text",children:"此作业暂无附件"})]})]})})},ey=e=>{let{title:s,className:a}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ef,{tag_name:s||"附件",className:a,children:(0,i.jsx)(ew,{...e})})})},ek=e=>{let{className:s,...a}=e;return(0,i.jsx)(B.ZP,{theme:{token:{colorPrimary:"#F79B2E"}},children:(0,i.jsx)("div",{className:`hover button-fix ${s}`,children:(0,i.jsx)(w.ZP,{...a,className:"submit "})})})},{Dragger:e_}=et.Z,eZ=e=>{let[s,a]=(0,m.useState)(""),{className:t,onChange:l,defaultList:r,disabled:n,mobile:o}=e,[c,u]=(0,m.useState)();(0,m.useEffect)(()=>{h("/auth/get-qntoken").then(e=>{a(e.data.QiniuToken)},e=>{d.ZP.error("网络状况不佳"),console.error(e)})},[]),(0,m.useEffect)(()=>{if(r){var e;let s=null==(e=r.filter(e=>e))?void 0:e.map((e,s)=>({uid:`${Date.now()}${e}`,name:e.split("--")[1]?e.split("--")[1]:`file-${s}`,status:"done",url:e}));l(s),u(s[0]?s:[])}else u(void 0)},[r]);let x=e=>{e.file.status,"done"===e.file.status&&d.ZP.success(`${e.file.name} \u{6587}\u{4EF6}\u{4E0A}\u{4F20}\u{6210}\u{529F}`),u(e.fileList),l(e.fileList)},v=e=>{if(c){let s=c.indexOf(e),a=c.slice();a.splice(s,1),u(a),l(a)}},j=e=>{let a={fname:`${Date.now()}--${e.file.name}`},t=ei.ws(e.file,`${Date.now()}--${e.file.name}`,s,a,{}).subscribe({next:s=>{e.onProgress({percent:s.total.percent})},error:s=>{e.onError(s),t&&t.unsubscribe()},complete:s=>{e.onSuccess(s),t&&t.unsubscribe()}})};return(0,i.jsx)(i.Fragment,{children:o?(0,i.jsxs)(e_,{customRequest:j,onChange:x,onRemove:v,multiple:!0,className:`def-upload-mobile ${t}`,fileList:c,showUploadList:!1,disabled:!!n&&n,style:{backgroundColor:"#fff",border:"0"},children:[c?(0,i.jsx)(ew,{preview:!0,className:"file-preview-mobile",data:c&&c.map(e=>{var s;let a=null==(s=e.response)?void 0:s.key;return a?`${ej}${a}`:e.url})}):(0,i.jsx)("img",{src:"https://s2.loli.net/2023/08/10/Wbg5lrvECMwHPSt.png",className:"ant-upload-drag-icon",alt:""}),!c&&(0,i.jsx)("div",{className:"upload-mobile-mob",children:"选择文件"}),(0,i.jsx)("p",{className:"ant-upload-hint",style:{marginTop:"20px"},children:"支持常见文件格式，可以批量上传"}),c&&(0,i.jsxs)("div",{className:"upload-havefile-mobile",children:[(0,i.jsx)("div",{className:"continue upload-mobile-mob",children:"继续选择"}),(0,i.jsx)("div",{className:"clear upload-mobile-mob",onClick:e=>{e.stopPropagation(),u(void 0),d.ZP.success("文件清除成功")},children:"重新选择"})]})]}):(0,i.jsx)(et.Z,{customRequest:j,onChange:x,onRemove:v,showUploadList:!0,multiple:!0,className:`def-upload ${t}`,fileList:c,disabled:!!n&&n,children:(0,i.jsx)(ek,{className:"def-button",disabled:!!n&&n,icon:(0,i.jsx)(eh.Z,{}),children:"上传"})})})},{TextArea:eC}=b.Z,eS=e=>{let[s,a]=(0,m.useState)(0),[t,l]=(0,m.useState)({value:{},list:[]}),[r,n]=(0,m.useState)([""]),{defaultValue:o,disabled:c,type:d,style:u,className:x,label:h,placeHolder:v,limit:j,innerClassName:p,onChange:g}=e;(0,m.useEffect)(()=>{o&&r[0]!=o[0]&&(l({value:{value:o[0]},list:o}),n(o),"file"!==d&&g(o[0]))},[o,r,g,d]),(0,m.useEffect)(()=>{"file"!=d&&a(+("input"===d)+1)},[d]);let f=e=>{l({value:{value:e.target.value},list:t.list}),g(e.target.value)};return(0,i.jsx)(B.ZP,{theme:{token:{colorPrimary:"#F79B2E"}},children:(0,i.jsxs)("div",{className:"input-wrap "+x,style:u,children:[(0,i.jsx)("div",{className:"input-label",children:h}),2==s?(0,i.jsx)(b.Z,{disabled:!!c&&c,placeholder:v,allowClear:!0,className:"input-element "+p,maxLength:j,onChange:f,showCount:void 0!==j}):s?(0,i.jsx)(eC,{disabled:!!c&&c,placeholder:o[0],allowClear:!0,className:"textarea-element "+p,style:{resize:"none"},maxLength:j,onChange:f,...t.value,showCount:void 0!==j}):(0,i.jsx)(eZ,{disabled:!!c&&c,onChange:e=>{g(e)},defaultList:t.list,className:"upload-element "+p})]})})};var eP=a(5241),eF=a(2989);let e$=e=>{let{onChoose:s,data:a,onSwitch:t,type:l,pure:r}=e,[n,o]=(0,m.useState)(a[0]),[d,u]=(0,m.useState)(!1);(0,m.useEffect)(()=>{v(a[0])},[a]);let x=(0,c.s0)(),v=e=>{o(e),u(!1),s&&s(e),e.id?h(`/task/assigned/${e.id}`).then(s=>{console.log(s.data),t&&t(s.data,e.id)}):t&&t({title_text:"暂无作业",content:"",urls:[]},"")},j=e=>(null==e?void 0:e.length)>14?e.slice(0,14)+"...":e,g=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(p.Z,{id:"user"!=l?r?"drop-down-list-pure":"drop-down-list":r?"drop-down-list-user-pure":"drop-down-list-user",children:[(0,i.jsx)("div",{className:"user"!=l?"drop-list-wrap":"drop-list-wrap user",children:a.map(e=>(0,i.jsx)(p.Z.Item,{className:"drop-item-wrap",onClick:()=>v(e),children:(0,i.jsx)("div",{className:"drop-down-list-item",children:j(e.text)})},e.id))}),"user"!=l&&(0,i.jsx)(w.ZP,{className:"new-task",onClick:()=>{x("/app/homework/admin/new")},children:"新建作业"})]})});return(0,i.jsx)(B.ZP,{theme:{token:{colorPrimary:"#F79B2E"}},children:(0,i.jsx)(eP.Z,{open:d,content:g,trigger:r?"click":"hover",className:"popover",placement:"bottom",onOpenChange:e=>{u(e)},children:"user"===l?(0,i.jsxs)(w.ZP,{id:r?"button-pure":"button",className:"disabled",children:[j(null==n?void 0:n.text),(0,i.jsx)("div",{className:"arrow",children:(0,i.jsx)(eF.Z,{})})]}):(0,i.jsx)(b.Z,{className:r?"drop-input-pure":"drop-input",placeholder:j(null==n?void 0:n.text),onChange:e=>{u(!1),o({id:n.id,text:e.target.value}),s&&s({id:n.id,text:e.target.value})},value:n.text,allowClear:!0})})})},eB=e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"popover-wrap",children:[(0,i.jsx)("div",{className:"input-label",children:"标题"}),(0,i.jsx)(e$,{...e})]})});function eE(e,s){let a;return function(){for(var t=arguments.length,l=Array(t),r=0;r<t;r++)l[r]=arguments[r];a&&clearTimeout(a),a=setTimeout(()=>{e(...l)},s)}}var eM=a(7484),eD=a.n(eM);let eq=e=>{var s,a;let{title:t,onSwitch:l,submitClass:r,children:n,onSubmit:o,loading:c,status:u,className:x,style:h,button_title:v,choice:j,taskList:p=[],submitDisabled:g,group:f,deadlineAvailable:b}=e,[N,w]=(0,m.useState)(),[y,k]=(0,m.useState)({title_text:"",content:"",urls:[""],deadline:"",group:"",semester:S(),version:0,year:new Date().getFullYear()}),[_,Z]=(0,m.useState)({title_text:"",assignedTaskID:""}),[C,P]=(0,m.useState)(),F=["未提交","已提交","已批阅","逾期未交"],[$,B]=(0,m.useState)(eD()(new Date));console.log($.isSame(eD()(new Date),"day"));let E=e=>{if(j.includes("edit"))return void Z({title_text:e.text,assignedTaskID:e.id});Z({title_text:e.text})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eu.Z,{title:(0,i.jsx)(ed,{extra:(0,i.jsx)(i.Fragment,{children:void 0!==u&&(0,i.jsx)("div",{className:"upload-status",children:0==u&&(e=>{if(!e)return!1;let s=new Date(e);return new Date>s})((null==y?void 0:y.deadline)||"")?F[3]:F[u]})}),title:t,deadline:b?y.deadline:""}),className:"upload-wrap "+(x||""),style:h,loading:c,children:(0,i.jsxs)("div",{className:"upload-upload",children:[j.includes("new")?(0,i.jsx)(eS,{defaultValue:[y.title_text],label:"标题",type:"input",className:"inp more",limit:30,onChange:e=>E({id:"",text:e})}):(0,i.jsx)(eB,{type:j.includes("user")?"user":"admin",onSwitch:(e,s)=>{e&&(k(e),e.deadline&&B(eD()(e.deadline)),l&&l(s))},data:p,onChoose:e=>E(e)}),(0,i.jsx)(eS,{label:"内容简介",type:"textarea",className:"inp",limit:500,defaultValue:[y.content],onChange:e=>{P(e)},disabled:j.includes("user")}),j.includes("user")?(0,i.jsx)(ey,{className:"inp",data:y.urls}):(0,i.jsx)(eS,{label:"附件",type:"file",className:"inp",onChange:e=>(e=>{let s=null==e?void 0:e.map(e=>e&&e.response&&"object"==typeof e.response&&"key"in e.response&&"string"==typeof e.response.key?`${ej}${e.response.key}`:e.url?e.url:"");w(null==s?void 0:s.filter(e=>"undefined"!==e&&""!==e))})(e),defaultValue:y.urls?y.urls:[],disabled:j.includes("user")||Array.isArray(p)&&p.length>0&&!(null==(s=p[0])?void 0:s.id)&&!j.includes("new")||g}),!j.includes("user")&&(0,i.jsxs)("div",{className:"deadline",children:[(0,i.jsx)("div",{children:"请选择结束日期"}),(0,i.jsx)(ex.Z,{placeholder:"结束日期",value:$,onChange:e=>{B(e),console.log(e.format("YYYY-MM-DD HH:mm:ss"))}}),$.isSame(eD()(new Date),"day")&&(0,i.jsx)("div",{className:"deadline-warning",children:"还未选择截止日期！"})]}),n,(0,i.jsx)(ek,{className:`submit-page  ${r||""}`,onClick:eE(()=>{let e={..._,content:C||"",urls:N||[],deadline:$.format("YYYY-MM-DD HH:mm:ss"),group:f,semester:S(),year:new Date().getFullYear()};return _.title_text.length?(null==C?void 0:C.length)?$.isSame(eD()(new Date),"day")?void d.ZP.error("请设置截止日期").then(null,null):void(o&&o(e)):void d.ZP.error("内容简介不能为空").then(null,null):void d.ZP.error("作业名称不能为空").then(null,null)},400),disabled:g||!j.includes("new")&&p&&p.length>0&&!(null==(a=p[0])?void 0:a.id),children:v})]})})})},ez=e=>{let[s,a]=(0,m.useState)(),[t,l]=(0,m.useState)(!0),[r,n]=(0,m.useState)([]),{title:o,button_title:u,choice:v,...j}=e;(0,m.useEffect)(()=>{g(ev["0"])},[]);let p=(0,c.s0)(),g=e=>{a(e),l(!0),f(e)},f=e=>{h(`/task/assigned/list/selected?group=${e.value}&year=${new Date().getFullYear()}&semester=${S()}`).then(e=>{console.log(e),l(!1),(null==e?void 0:e.titles)?n(e.titles.reverse()):n([{id:"",text:"暂时没有作业"}])},null)};return(0,i.jsxs)("div",{id:"homework-edit-wrap",...j,children:[(0,i.jsx)(em,{title:"组别选择",data:ev,className:"selector-edit",onChange:e=>g(e)}),(0,i.jsx)(eq,{onSubmit:e=>{x(`/task/assigned?group=${s?null==s?void 0:s.value:""}`,e).then(()=>{f(s),v&&v.includes("new")&&p("/app/homework/admin/edit"),d.ZP.success("提交成功").then(null,null)}).catch(e=>{d.ZP.error(`\u{63D0}\u{4EA4}\u{5931}\u{8D25}`).then(null,null),console.log(e)})},choice:v||"edit",title:o||"修改作业",button_title:u||"确认修改",taskList:r,loading:t,group:(null==s?void 0:s.value)||ev["0"].value,deadlineAvailable:!1})]})};var eI=a(1843),eO=a(6685);let{Meta:eL}=eu.Z,eT=e=>{let{CommentData:s,SubmitId:a,onCommentSuccess:t,...l}=e,[r,n]=(0,m.useState)(!0),[o,c]=(0,m.useState)({}),[d,u]=(0,m.useState)(""),[h,v]=(0,m.useState)({});async function j(e,s){try{let l=await x(`/task/submitted/${a}/comment/reply`,{id:a,father_id:e,content:s});!0===l.data.flag?(console.log("发表回复成功"),v(s=>({...s,[e]:""})),c(s=>({...s,[e]:!1})),null==t||t()):console.log("发表回复失败")}catch(e){console.error(e)}}return(0,m.useEffect)(()=>{n(!0),setTimeout(()=>{n(!1)},1e3)},[s]),(0,i.jsx)("div",{...l,children:(0,i.jsxs)(eu.Z,{className:"comment-card",title:(0,i.jsx)(ed,{title:"评论区",style:{marginLeft:"0"},children:"评论区"}),children:[(0,i.jsx)(p.Z,{dataSource:s,className:"comment-wrap",renderItem:(e,s)=>(0,i.jsx)(p.Z.Item,{children:(0,i.jsxs)(eu.Z,{style:{width:"90%",margin:"auto",whiteSpace:"pre-wrap"},loading:r,children:[(0,i.jsx)(eL,{avatar:(0,i.jsx)(g.C,{src:e.avatar?e.avatar:"https://xsgames.co/randomusers/avatar.php?g=pixel&key=1"}),title:(0,i.jsx)(eA,{item:e}),description:`${e.content.replace(/\n/g,"\r\n")}`}),(0,i.jsxs)("div",{className:"time-reply",children:[(0,i.jsx)("div",{className:"create_time",children:e.create_time}),(0,i.jsxs)("button",{className:"replybtn",onClick:()=>{var s;s=e.comment_id,c(e=>({...e,[s]:!e[s]||!e[s]}))},children:[(0,i.jsx)("img",{className:"replybtn-img",src:"https://ossfresh-test.muxixyz.com/%E8%AF%84%E8%AE%BA.svg"}),(0,i.jsx)("text",{className:"replybtn-text",children:"回复"})]})]}),o[e.comment_id]&&(0,i.jsxs)("div",{className:"reply-input",children:[(0,i.jsx)(b.Z,{placeholder:"回复"+e.nickname,className:"input",value:h[e.comment_id],onChange:s=>{var a,t;return a=e.comment_id,t=s.target.value,void v(e=>({...e,[a]:t}))}}),(0,i.jsx)(w.ZP,{className:"btn",onClick:()=>j(e.comment_id,h[e.comment_id]),children:"回复"})]}),e.replies&&e.replies.map((s,a)=>(0,i.jsxs)("div",{children:[(0,i.jsx)(eI.Z,{}),(0,i.jsx)(eL,{className:"reply-tag",avatar:(0,i.jsx)(g.C,{src:s.avatar?s.avatar:"https://xsgames.co/randomusers/avatar.php?g=pixel&key=1"}),title:(0,i.jsxs)("div",{className:"reply-tag-text",children:[s.name?s.name:s.nickname," 回复"," ",e.name?e.name:e.nickname]}),description:`${s.content.replace(/\n/g,"\r\n")}`},a),(0,i.jsx)("div",{className:"time",children:s.create_time})]},a))]})},s)}),(0,i.jsx)("div",{className:"comment-box",children:(0,i.jsx)(b.Z,{className:"comment-input",suffix:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E5%AE%B9%E5%99%A8%404x%20%284%29.png",className:"submit-suffix",onClick:eE(function(){x(`/task/submitted/${a}/comment`,{id:a,content:d}).then(e=>{console.log(e.data,"发表评论成功"),u(""),null==t||t()}).catch(e=>{console.error(e,"发表评论失败")})},400)}),placeholder:"发表一下你的评论吧...",value:d,onChange:e=>{u(e.target.value)}})})]})})},eA=e=>{var s;let{item:a,className:t}=e;return(0,i.jsxs)("div",{className:t,children:[(s=a.name?a.name:a.nickname)?s.length>8?`${s.slice(0,8)}...`:s:"管理员",(0,i.jsx)(eO.Z,{color:"orange",className:"comment-tag",children:a.group})]})},{TextArea:eU}=b.Z,eQ=e=>{let[s,a]=(0,m.useState)(""),{onCommentSubmit:t,onValueChange:l,...r}=e;return(0,i.jsx)("div",{...r,children:(0,i.jsx)(B.ZP,{theme:{token:{colorPrimary:"#F79B2E"}},children:(0,i.jsxs)(eu.Z,{title:(0,i.jsx)(ed,{title:"评语",style:{marginLeft:0}}),className:"write-comment-wrap",children:[(0,i.jsx)(eU,{placeholder:"快来发表评论吧",allowClear:!0,className:"write-comment-input ",style:{resize:"none"},value:s,onChange:e=>{let s=e.target.value;a(s),l&&l(s)}}),(0,i.jsx)(ek,{onClick:eE(()=>{s?t&&t(s):d.ZP.error("评论内容为空").then(null,null),a("")},400),className:"write-comment-button",children:"评论"})]})})})},{Meta:eY}=eu.Z,eH=e=>{let[s,a]=(0,m.useState)([]),{task_id:t,group:l,style:r,classNames:n}=e;(0,m.useEffect)(()=>{o()},[]);let o=()=>{h(`/task/assigned/${t}/completion?page=1`).then(e=>{let{completions:s}=e.data;s&&a(s.map(e=>({...e,group:l,key:e.user_id,task_id:t,version:e.version})).reverse())},null)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(B.ZP,{theme:{token:{colorPrimary:"#F79B2E"}},children:(0,i.jsx)("div",{style:r,className:"form-wrap "+n,children:(0,i.jsx)(eR,{className:"data-table-item",dataSet:s})})})})},eR=e=>{let[s,a]=(0,m.useState)(!0);(0,m.useEffect)(()=>{a(!1)},[e.dataSet]);let{className:t,dataSet:l}=e;return(0,i.jsxs)(i.Fragment,{children:[l&&l.map(e=>(0,i.jsxs)(eu.Z,{className:t,loading:s,children:[(0,i.jsx)(eY,{avatar:(0,i.jsx)(g.C,{src:e.avatar}),title:e.name,description:e.email}),(0,i.jsx)(eO.Z,{color:"已审阅"===e.status?"green":"orange",className:"data-table-tag",children:e.status}),(0,i.jsx)("a",{className:"data-table-card",href:`/app/homework/admin/judge?infoItem=${encodeURI(JSON.stringify(e))}`,target:"_blank",children:"点击查看"})]},`${e.task_id}${e.email}`)),!l[0]&&(0,i.jsx)(eV,{})]})},eV=()=>(0,i.jsxs)("div",{className:"empty-image-wrap",children:[(0,i.jsx)("img",{src:"https://s2.loli.net/2023/08/06/haG14HpKk5gczIR.png",className:"empty-image",alt:""}),(0,i.jsx)(ed,{title:"暂无数据",className:"empty-text"})]});var eW=a(8930);let eG=()=>(0,i.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(c.j3,{})});var eK=a(5049),eJ=a(5911),eX=a(9294),e0=a(2292);let e1=()=>{let e=new Date().getFullYear(),s=[];for(let a=e;a>e-4;a--)s.push({value:String(a),label:String(a)});return s},e2=()=>[{key:"计算机学院",value:"计算机学院"},{key:"人工智能教育学部",value:"人工智能教育学部"},{key:"心理学院",value:"心理学院"},{key:"经济与工商管理学院",value:"经济与工商管理学院"},{key:"公共管理学院",value:"公共管理学院"},{key:"信息管理学院",value:"信息管理学院"},{key:"城市与环境科学学院",value:"城市与环境科学学院"},{key:"美术学院",value:"美术学院"},{key:"新闻传播学院",value:"新闻传播学院"},{key:"政治与国际关系学院",value:"政治与国际关系学院"},{key:"教育学院",value:"教育学院"},{key:"文学院",value:"文学院"},{key:"历史文化学院",value:"历史文化学院"},{key:"马克思主义学院",value:"马克思主义学院"},{key:"法学院",value:"法学院"},{key:"社会学院",value:"社会学院"},{key:"外国语学院",value:"外国语学院"},{key:"音乐学院",value:"音乐学院"},{key:"数学与统计学学院",value:"数学与统计学学院"},{key:"物理科学与技术学院",value:"物理科学与技术学院"},{key:"化学学院",value:"化学学院"},{key:"生命科学学院",value:"生命科学学院"},{key:"体育学院",value:"体育学院"}],e8=()=>{let{form_id:e}=(0,c.UO)(),{user_id:s}=(0,c.UO)(),[a,t]=(0,m.useState)(""),[l,r]=(0,m.useState)(""),[n,o]=(0,m.useState)(""),[u,j]=(0,m.useState)(""),[p,g]=(0,m.useState)(""),[N,w]=(0,m.useState)(""),[y,k]=(0,m.useState)(""),[Z,C]=(0,m.useState)(""),[S,P]=(0,m.useState)(""),[F,$]=(0,m.useState)(""),[E,M]=(0,m.useState)(""),[D,q]=(0,m.useState)({email:"",qq:"",phone:""}),[z,I]=(0,m.useState)("手机"),[O,L]=(0,m.useState)("邮箱"),[T,A]=(0,m.useState)(""),[U,Q]=(0,m.useState)(""),[Y,H]=(0,m.useState)(""),[R,V]=(0,m.useState)(""),[W,G]=(0,m.useState)(""),[K,J]=(0,m.useState)(!1),[X,ee]=(0,m.useState)(""),es={male:"男生",female:"女生",Backend:"后端组",Design:"设计组",Frontend:"前端组",Product:"产品组"};(0,m.useEffect)(()=>{h(`/form/view?entry_form_id=${e||"myself"}`).then(e=>{200==e.code&&(J(!0),k(e.data.avatar),ee(e.data.form_id),j(e.data.gender),$(e.data.major),M(e.data.grade),e.data.phone&&I("phone"),q(s=>({...s,phone:e.data.phone})),H(e.data.group),A(e.data.reason),Q(e.data.knowledge),V(e.data.self_intro),G(e.data.extra_question))}).catch(e=>{console.error(e)}),h(`/users/${s?`info/${s}`:"my-info"}`).then(e=>{o(e.data.name),C(e.data.student_id),g(e.data.nickname),w(e.data.avatar),P(e.data.school),e.data.qq&&L("qq"),q(s=>({...s,qq:e.data.qq,email:e.data.email}))}).catch(e=>{console.error(e)}),h("/auth/get-qntoken",!0).then(e=>{let{QiniuToken:s}=e.data;t(s);let a={useCdnDomain:!0,region:ei.KM.z2};ei.M$(a,s).then(e=>{r(e)})})},[e,s]);let[ea,er]=(0,m.useState)([]);(0,m.useEffect)(()=>{"email"!=z||s||d.ZP.info("邮箱请在个人主页修改")},[z]),(0,m.useEffect)(()=>{"email"!=O||s||d.ZP.info("邮箱请在个人主页修改")},[O]);let[en,eo]=(0,m.useState)(!1);(0,m.useEffect)(()=>{let e=new Date,s=new Date(e.getFullYear(),8,26,23,59,0);e>s&&(eo(!0),d.ZP.warning("未在报名时间内"))},[]);let ec=(0,m.useMemo)(()=>e1(),[]),ed=(0,m.useMemo)(()=>e2(),[]);return(0,i.jsx)("div",{className:"FormWebpage",children:(0,i.jsx)(B.ZP,{theme:{token:{colorPrimary:"#ffb841"}},children:(0,i.jsx)(eX.Z,{font:{fontWeight:200},content:"MUXI-STUDIO",style:{width:"100%"},children:(0,i.jsxs)("div",{className:"FromForWeb",children:[(0,i.jsx)("div",{className:"title_formweb",children:"个人信息"}),(0,i.jsxs)("div",{className:"personInformationbox",children:[(0,i.jsx)(el.Z,{children:(0,i.jsx)(et.Z,{action:l,data:{token:a},fileList:ea,onChange:e=>{let{fileList:s}=e;er(s);let a=s[0].response;a&&k(`https://ossfresh-test.muxixyz.com/${a.key}`)},showUploadList:!1,maxCount:1,disabled:!!e,children:(0,i.jsx)("div",{className:"avatar_formweb",children:y?(0,i.jsx)("img",{src:y,alt:""}):(0,i.jsxs)("div",{className:"avatarDefault",children:[(0,i.jsx)("div",{style:{fontSize:"20px"},children:"+"}),(0,i.jsx)("div",{children:"上传证件照"})]})})})}),(0,i.jsxs)("div",{className:"personInfoContent",children:[(0,i.jsxs)("div",{className:"term_formweb",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"姓名:"}),(0,i.jsx)(b.Z,{readOnly:!!e,className:"input_formweb",type:"text",value:n,onChange:e=>{o(e.target.value)}})]}),(0,i.jsxs)("div",{className:"term_formweb",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"性别:"}),e?(0,i.jsx)(b.Z,{className:"select_formweb",value:es[u]?es[u]:u,readOnly:!0}):(0,i.jsx)(f.Z,{wrap:!0,children:(0,i.jsx)(_.Z,{size:"large",className:"select_formweb",defaultValue:"",value:u,onChange:e=>j(e),options:[{value:"male",label:"男生"},{value:"female",label:"女生"}]})})]})]}),(0,i.jsxs)("div",{className:"personInfoContent",children:[(0,i.jsxs)("div",{className:"term_formweb",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"学号:"}),(0,i.jsx)(b.Z,{className:"input_formweb",type:"text",value:Z,onClick:()=>{e||d.ZP.info("学号请在个人主页修改")}})]}),(0,i.jsxs)("div",{className:"term_formweb",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"年级:"}),e?(0,i.jsx)(b.Z,{className:"select_formweb",value:E,readOnly:!0}):(0,i.jsx)(f.Z,{wrap:!0,children:(0,i.jsx)(_.Z,{disabled:!!e,size:"large",className:"select_formweb",defaultValue:"大一",value:E,onChange:e=>M(e),options:ec})})]})]}),(0,i.jsxs)("div",{className:"personInfoContent",children:[(0,i.jsxs)("div",{className:"term_formweb",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"学院:"}),e?(0,i.jsx)(b.Z,{className:"select_formweb",value:S,readOnly:!0,style:{width:"180px"}}):(0,i.jsx)(f.Z,{wrap:!0,children:(0,i.jsx)(_.Z,{disabled:!!e,size:"large",id:"academy",defaultValue:"",style:{width:"180px"},value:S,onChange:e=>P(e),className:"select_formweb",options:ed})})]}),(0,i.jsxs)("div",{className:"term_formweb",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"专业:"}),(0,i.jsx)(b.Z,{readOnly:!!e,type:"text",className:"input_formweb",value:F,style:{width:"180px"},onChange:e=>{$(e.target.value)}})]})]}),(0,i.jsxs)("div",{className:"personInfoContent",children:[(0,i.jsxs)("div",{className:"contactWayterm",children:[(0,i.jsx)(f.Z,{wrap:!0,children:(0,i.jsx)(_.Z,{style:{width:"120px",textAlign:"center"},value:z,onChange:e=>I(e),options:[{value:"email",label:"邮箱",disabled:"email"==O},{value:"qq",label:"QQ",disabled:"qq"==O},{value:"phone",label:"手机",disabled:"phone"==O}]})}),(0,i.jsx)(b.Z,{disabled:"email"==z,readOnly:!!e,style:{width:"180px"},type:"text",className:"contactContent input_formweb",name:z,value:D[z],onChange:e=>q(s=>({...s,[e.target.name]:e.target.value}))})]}),(0,i.jsxs)("div",{className:"contactWayterm",children:[(0,i.jsx)(f.Z,{wrap:!0,children:(0,i.jsx)(_.Z,{style:{width:"120px",textAlign:"center"},value:O,onChange:e=>L(e),options:[{value:"email",label:"邮箱",disabled:"email"==z},{value:"qq",label:"QQ",disabled:"qq"==z},{value:"phone",label:"手机",disabled:"phone"==z}]})}),(0,i.jsx)(b.Z,{disabled:"email"==O,readOnly:!!e,style:{width:"180px"},type:"text",className:"contactContent input_formweb",name:O,value:D[O],onChange:e=>q(s=>({...s,[e.target.name]:e.target.value}))})]})]})]}),(0,i.jsx)("div",{className:"title_formweb",children:"报名信息"}),(0,i.jsxs)("div",{className:"registerInformationbox",children:[(0,i.jsxs)("div",{className:"term_formweb wantGroup",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"心动组别:"}),e?(0,i.jsx)(b.Z,{className:"select_formweb",value:es[Y],readOnly:!0}):(0,i.jsx)(f.Z,{wrap:!0,children:(0,i.jsx)(_.Z,{disabled:!!e,style:{width:"120px",textAlign:"center"},id:"GroupSelect",value:Y,onChange:e=>H(e),options:[{value:"Product",label:"产品组",content:"引领头脑风暴，洞察市场需求，掌舵团队运营"},{value:"Design",label:"设计组",content:"以美学之名，精雕细琢，呈现精美严谨的交互界面"},{value:"Frontend",label:"前端组",content:"基于浏览器内核开发跨平台、跨终端的应用软件"},{value:"Backend",label:"后端组",content:"后端服务、服务器运维、保障木犀产品长治久安"}].map(e=>({value:e.value,label:(0,i.jsx)(eK.Z,{overlayInnerStyle:{boxShadow:"none",border:"none",backgroundColor:"white"},arrow:!1,title:(0,i.jsxs)("div",{style:{width:"250px",backgroundColor:"white",padding:"10px",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:[(0,i.jsx)("strong",{style:{display:"block",textAlign:"center",color:"grey"},children:e.label}),(0,i.jsx)("div",{style:{maxWidth:"250px",whiteSpace:"pre-wrap",overflowY:"auto",maxHeight:"100px",color:"grey"},children:e.content})]}),placement:"right",children:(0,i.jsx)("div",{children:e.label})})}))})})]}),(0,i.jsxs)("div",{className:"reasonbox",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"心动理由:"}),(0,i.jsx)(e0.Z,{readOnly:!!e,maxLength:500,style:{resize:"none"},className:"textarea_formweb",name:"",id:"group_reason",placeholder:"请输入你的心动理由",value:T,onChange:e=>A(e.target.value)})]}),(0,i.jsxs)("div",{className:"knowledgebox",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"对组别的认识:"}),(0,i.jsx)(e0.Z,{readOnly:!!e,maxLength:500,style:{resize:"none"},className:"textarea_formweb",name:"",id:"group_knowledge",placeholder:"请输入你对所选组别的了解",value:U,onChange:e=>Q(e.target.value)})]}),(0,i.jsxs)("div",{className:"self_introbox",children:[(0,i.jsx)("div",{className:"detail_formweb",children:"自我介绍:"}),(0,i.jsx)(e0.Z,{readOnly:!!e,style:{resize:"none"},maxLength:500,className:"textarea_formweb",name:"",id:"self_inro",placeholder:"进行一个自我介绍，内容需要包含自己的性格、能力、获得过的相关的成就以及假如自己进入木犀后的想法，可加入其他内容。",value:R,onChange:e=>V(e.target.value)})]}),(0,i.jsxs)("div",{className:"questionbox_formweb",children:["你是否有加入/正在加入一些其他组织或担任学生工作?",(0,i.jsx)("div",{className:"answerbox_formweb",children:(0,i.jsxs)(eJ.ZP.Group,{disabled:!!e,buttonStyle:"solid",onChange:e=>G(e.target.value),value:W,className:"answer-radio",children:[(0,i.jsx)(eJ.ZP,{value:"Y",children:"是"}),(0,i.jsx)(eJ.ZP,{value:"N",children:"否"})]})}),(0,i.jsx)("div",{className:"send_formweb-box",children:(0,i.jsx)("div",{style:{display:e?"none":""},className:"send_formweb",onClick:en?()=>{d.ZP.warning("未在报名时间内")}:K?eE(()=>{let e=[n,u,E,F,S,Y,T,U,R,W],s=["请输入姓名","请选择性别","请输入年级","请输入专业","请选择学院","请选择心动组别","请输入心动理由","请输入对组别了解","请填写自我介绍","请回答额外问题"];for(let a=0;a<e.length;a++){if(""===e[a])return void d.ZP.info(s[a]);if(""==D.qq&&""==D.phone)return void d.ZP.info("请至少输入QQ或手机中的一项")}v("/form/",{form_id:X,avatar:y,major:F,grade:E,gender:u,phone:D.phone,group:Y,reason:T,knowledge:U,self_intro:R,extra_question:W}).then(e=>{200===e.code?(d.ZP.success("修改成功^_^"),J(!1)):d.ZP.error("修改失败")}).catch(e=>{console.error(e)}),x("/users/",{avatar:N,name:n,nickname:p,qq:D.qq,school:S}).catch(e=>{console.error(e)})},400):eE(()=>{let e=[n,u,E,F,S,Y,T,U,R,W,y],s=["请输入姓名","请选择性别","请输入年级","请输入专业","请选择学院","请选择心动组别","请输入心动理由","请输入对组别了解","请填写自我介绍","请回答额外问题","请上传证件照"];for(let a=0;a<e.length;a++){if(""===e[a])return void d.ZP.info(s[a]);if(""==D.qq&&""==D.phone)return void d.ZP.info("请至少输入QQ或手机中的一项")}x("/form/",{form_id:X,avatar:y,major:F,grade:E,gender:u,phone:D.phone,group:Y,reason:T,knowledge:U,self_intro:R,extra_question:W}).then(e=>{200===e.code?(d.ZP.success("提交成功^_^"),J(!0)):d.ZP.error("提交失败")}).catch(e=>{console.error(e)}),x("/users/",{avatar:N,name:n,nickname:p,qq:D.qq,school:S}).catch(e=>{console.error(e)})},400),children:K?"完成修改":"提交表格"})}),(0,i.jsx)("div",{className:"alert-text",children:"在报名表提交截止时间之前，再次提交报名表可覆盖前一次报名表"})]})]})]})})})})};var e4=a(2491);let e5=e=>{let{children:s,classNames:a,backPath:t,title:l}=e,r=(0,c.s0)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"page-wrap-mobile",children:[(0,i.jsxs)("div",{className:"page-top",children:[(0,i.jsx)("div",{className:"page-back",onClick:()=>{r(t)},children:(0,i.jsx)(e4.Z,{})}),(0,i.jsx)("div",{className:"page-title",children:l})]}),(0,i.jsx)("div",{className:`page-container ${a}`,children:(0,i.jsx)("div",{className:"page-container-inner",children:s})})]})})},e9=e=>{let{onChange:s}=e;return(0,i.jsxs)("div",{className:"top-bar-mobile",children:[(0,i.jsx)(e3,{}),(0,i.jsx)(e6,{data:ev,onChange:s})]})},e3=e=>{var s;let[a,t]=(0,m.useState)();(0,m.useEffect)(()=>{h("/users/my-info").then(e=>{t(e.data)},null)},[]);let{className:l,style:r}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:`avatar-wrap ${l}`,style:r,children:[(0,i.jsx)(g.C,{className:"top-bar-avatar",src:null==a?void 0:a.avatar,icon:(0,i.jsx)(V.Z,{})}),(null==(s=null==a?void 0:a.nickname)?void 0:s.length)>8?s.slice(0,8)+"...":s]})})},e6=e=>{let{data:s,className:a,onChange:t}=e,[l,r]=(0,m.useState)(!1),[n,o]=(0,m.useState)(s[0]),u=(0,c.s0)();return(0,m.useEffect)(()=>{h("/form/judge").then(e=>{"已交表"==e.data.form_status?h("/form/view?entry_form_id=myself").then(e=>{let a=s.filter(s=>s.value===e.data.group)[0];o(a),t&&t(a)},null):d.ZP.info("请先填写报名表").then(()=>{u("/app")},null)},null)},[]),(0,i.jsx)(B.ZP,{theme:{token:{colorPrimary:"#eee"}},children:(0,i.jsx)("div",{className:`selector-mobile-wrap ${a}`,children:(0,i.jsx)(eP.Z,{className:"selector-mobile-popover",trigger:"click",open:l,content:s.map((e,s)=>(0,i.jsx)(p.Z.Item,{className:"selector-mobile-item",onClick:()=>{t&&t(e),o(e),r(!l)},children:e.key},`${e.value} ${s.toString(10)}`)),children:(0,i.jsxs)(w.ZP,{onClick:()=>r(!l),className:"selector-mobile-button",children:[`${null==n?void 0:n.key}\u{4F5C}\u{4E1A}`,(0,i.jsx)("img",{className:"icon_2",src:"https://s2.loli.net/2023/08/31/JAK6Lyq9nWG2tBj.png",alt:""})]})})})})},e7=e=>{let[s,a]=(0,m.useState)(),{currentTaskInfo:t,uploadHistory:l,currentTaskID:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"mobile-bef-wrap",children:[(0,i.jsxs)("div",{className:"user-mobile-submit",children:[(0,i.jsxs)("div",{className:"task-title-wrap-mobile",children:[(0,i.jsx)("div",{className:"img-wrap ",children:(0,i.jsx)("img",{alt:"",src:"https://s2.loli.net/2023/08/31/C3fgIyNxX6sAkRF.png",className:"task-title-mobile-img"})}),(0,i.jsx)("h3",{children:null==t?void 0:t.title_text})]}),(0,i.jsx)("div",{className:"textbox-mobile",children:[null==t?void 0:t.content]}),(0,i.jsx)(ey,{className:"file-file-mobile",title:"附件:",data:null==t?void 0:t.urls})]}),(0,i.jsx)("div",{className:"user-mobile-submit",children:(0,i.jsxs)("div",{className:"user-mobile-drop",children:["作业附件 :",(0,i.jsx)(eZ,{mobile:!0,onChange:eE(e=>{a(null==e?void 0:e.map(e=>(null==e?void 0:e.response)?`${ej}${e.response.key}`:`${e.url}`))},400),defaultList:l})]})})]}),(0,i.jsx)("div",{className:"user-submit-button",onClick:()=>{r?x("/task/submitted",{assignedTaskID:r,urls:s}).then(()=>{d.ZP.success("提交成功").then(null,null)}).catch(()=>{d.ZP.error(`\u{63D0}\u{4EA4}\u{5931}\u{8D25}`).then(null,null)}):d.ZP.error("暂时还没有作业哦").then(null,null)},children:"提交作业"})]})};var se=a(3935);let ss=e=>{let{submissionID:s,uploadHistory:a,currentTaskInfo:t}=e,[l,r]=(0,m.useState)([]);return(0,m.useEffect)(()=>{h(`/task/submitted/${s}/comment`).then(e=>{r(e.data.comments.reverse())},null)},[s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(st,{uploadHistory:a,currentTaskInfo:t}),(0,i.jsx)("h2",{style:{textAlign:"center"},children:"作业已批改，无法修改"}),(0,i.jsx)(sa,{comments:l})]})},sa=e=>{let{comments:s}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"comments-wrap-mobile",children:[(0,i.jsx)("div",{className:"comment-title-mobile",children:`\u{5168}\u{90E8}\u{8BC4}\u{8BBA} (${s.length})`}),(0,i.jsx)("div",{className:"comment-underline-mobile"}),s&&s.map((e,s)=>{let{content:a,avatar:t}=e;return(0,i.jsx)(p.Z.Item,{className:"comment-list-item-mobile",children:(0,i.jsxs)("div",{className:"comment-list-item-title-mobile",children:[(0,i.jsx)(g.C,{size:"large",src:t||"https://xsgames.co/randomusers/avatar.php?g=pixel&key=1"}),(0,i.jsxs)("div",{className:"right-sec",children:[(0,i.jsx)(eA,{className:"comment-list-item-tag-mobile",item:e}),(0,i.jsx)("div",{className:"comment-content-mobile",children:a})]})]})},s)})]})})},st=e=>{let{uploadHistory:s,currentTaskInfo:a}=e,t=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"homework-pre-head-mobile",children:null==a?void 0:a.title_text}),(0,i.jsx)(e3,{style:{width:"100%"}}),(0,i.jsx)("div",{className:"homework-pre-mobile",children:null==a?void 0:a.content}),(0,i.jsx)(ey,{title:"附件:",className:"file-pre-mobile",data:s}),(0,i.jsx)("div",{className:"back-button",onClick:()=>sr.close(),children:"返 回"})]});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"check-home-work-wrap",children:[null==a?void 0:a.title_text,(0,i.jsx)("div",{className:"check-homework-button",onClick:()=>sr.open(t),children:"查看"})]})})},sl=e=>{let{children:s}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"modal-hover-mobile",onClick:()=>{sr.close()}}),(0,i.jsx)("div",{className:"modal-modal-mobile",children:s})]})},sr={_modalContainer:null,open:e=>{sr._modalContainer||(sr._modalContainer=document.createElement("div"),document.body.appendChild(sr._modalContainer)),se.render((0,i.jsx)(sl,{children:e}),sr._modalContainer)},close:()=>{sr._modalContainer&&(sr._modalContainer.classList.add("blur-off"),se.unmountComponentAtNode(sr._modalContainer),document.body.removeChild(sr._modalContainer),sr._modalContainer=null)}};var si=a(1438),sn=a(5401),so=a(6316);let sc=(0,o.aj)(Y.isMobileOnly?[{path:"/join",element:(0,i.jsx)(function(){let e=(0,c.s0)();return(0,i.jsxs)("div",{className:"mobile-join-wrap",children:[(0,i.jsxs)("div",{className:"header-box",children:[(0,i.jsx)("div",{className:"muxi-box",onClick:()=>window.open("https://m.muxi-tech.xyz/"),children:"木犀官网"}),(0,i.jsx)("div",{className:"muxi-logo-box",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/muxistudio.png",alt:""})}),(0,i.jsx)("div",{className:"muxi101-box",onClick:()=>window.open("https://muxi-studio.github.io/101/"),children:"木犀101"})]}),(0,i.jsx)("div",{className:"join-pic-box",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/join.png",alt:""})}),(0,i.jsx)("div",{className:"join-btn-box",children:(0,i.jsx)("span",{className:"join-btn",onClick:()=>e("/app"),children:"加入我们"})})]})},{})},{path:"/login",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)(""),[a,t]=(0,m.useState)(""),[l,r]=(0,m.useState)(""),[n,o]=(0,m.useState)(""),[u,v]=(0,m.useState)(""),[p,g]=(0,m.useState)(""),[f,N]=(0,m.useState)(""),[w,y]=(0,m.useState)(!1),[k,_]=(0,m.useState)(!1),[Z,C]=(0,m.useState)(60),S=(0,c.s0)();(0,m.useEffect)(()=>{if(k){let e=setTimeout(()=>{Z>0?C(e=>e-1):(_(!1),C(60),clearTimeout(e))},1e3)}},[Z,k]);let P=()=>{h("/auth/get-captcha",!1).then(e=>{let{image_base64:a,image_id:l}=e.data;s(a),t(l)},e=>{d.ZP.error("获取验证码失败，请稍后重试"),console.error(e)})},F=()=>{y(!1),v(""),g(""),N(""),_(!1),C(60)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"mobileSignIn-wrap",children:[(0,i.jsx)("div",{className:"header-box",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/join.png",alt:""})}),(0,i.jsxs)("div",{className:"form-box",children:[(0,i.jsxs)("div",{className:"form-title-box",children:[(0,i.jsx)("div",{className:"logo-box",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/muxilogo.png",alt:""})}),(0,i.jsx)("div",{className:"team-name-box",children:"木犀团队"})]}),(0,i.jsx)("div",{className:"account-box",children:(0,i.jsx)(b.Z,{className:"input-field",prefix:(0,i.jsx)(si.Z,{}),onChange:e=>{r(e.target.value)},value:l,placeholder:"请输入邮箱/学号"})}),(0,i.jsx)("div",{className:"password-box",children:(0,i.jsx)(b.Z.Password,{className:"input-field",prefix:(0,i.jsx)(sn.Z,{}),onChange:e=>{o(e.target.value)},value:n,placeholder:"请输入密码"})}),(0,i.jsxs)("div",{className:"verification-code-box",children:[(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>{v(e.target.value)},value:u,placeholder:"验证码"}),(0,i.jsx)("div",{className:"code-img-box",onClick:P,children:(0,i.jsx)("img",{className:"code-img",src:e,alt:""})})]}),(0,i.jsx)("div",{className:"forget-password-box",children:(0,i.jsx)("span",{className:"box-content",onClick:()=>{y(!0)},children:"忘记密码？"})}),(0,i.jsxs)("div",{className:"btn-box",children:[(0,i.jsx)("div",{className:"signIn-btn",onClick:()=>{x("/auth/verify-captcha",{image_id:a,verify_code:u},!1).then(e=>{let{code:s}=e;200===s?/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/.test(l)?x("/auth/login",{user_name:l,password:n},!1).then(e=>{200===e.code?(localStorage.setItem("token",e.data.token),d.ZP.success("登录成功！"),S("/app")):(d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}`),P())},e=>{console.error(e),d.ZP.error("登录失败，请重试！"),P()}):x("/auth/ccnuLogin",{student_id:l,password:n},!1).then(e=>{200===e.code?(localStorage.setItem("token",e.data.token),d.ZP.success("登录成功！"),S("/app")):(d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`),P())},e=>{console.error(e),d.ZP.error("登录失败，请重试！"),P()}):(d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}`),P())},e=>{d.ZP.error("验证失败，请重试"),P(),console.error(e)})},children:"登录"}),(0,i.jsx)("div",{className:"signUp-btn",onClick:()=>S("/register"),children:"注册"})]})]})]}),(0,i.jsxs)(es.Z,{className:"mobile-forget-password-modal",open:w,onOk:()=>/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/.test(p)?""===u?void d.ZP.error("请填写验证码！"):void x("/auth/auth-set-password",{email:p,verify_code:u},!0).then(e=>{if(200===e.code){let{auth_set_password_token:s}=e.data;j("/auth/set-password",{password:f},s).then(e=>{200===e.code?d.ZP.success("修改密码成功！"):d.ZP.error("修改密码失败，请重试！"),F()},e=>{console.error(e),d.ZP.error("修改密码失败，请重试！"),F()})}else d.ZP.error("验证码错误，请重试！"),F()},e=>{console.error(e),d.ZP.error("修改密码失败，请重试！"),F()}):void d.ZP.error("邮箱填写有误，请重试！"),onCancel:F,okText:"确认",cancelText:"取消",centered:!0,children:[(0,i.jsxs)("div",{className:"email-box",children:[(0,i.jsx)("div",{className:"box-label",children:"邮箱:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>g(e.target.value),value:p,placeholder:"请输入邮箱"})]}),(0,i.jsxs)("div",{className:"password-box",children:[(0,i.jsx)("div",{className:"box-label",children:"新密码:"}),(0,i.jsx)(b.Z.Password,{className:"input-field",onChange:e=>N(e.target.value),value:f,placeholder:"请输入新密码",required:!0})]}),(0,i.jsxs)("div",{className:"verifyCode-box",children:[(0,i.jsx)("div",{className:"box-label",children:"验证码:"}),(0,i.jsx)(b.Z,{className:"input-field",value:u,onChange:e=>v(e.target.value),required:!0}),k?(0,i.jsx)("div",{className:"countdown-box",children:`${Z}s`}):(0,i.jsx)("div",{className:"get-verifyCode-btn",onClick:()=>((e,s)=>{let a=/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/.test(e);if(!a){console.log(a),d.ZP.error("邮箱填写有误，请重试！");return}x("/auth/send-verification-code",{email:e,type:s},!1).then(e=>{let{code:s}=e;200===s?(d.ZP.success("验证码已发送！"),_(!0)):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`)},e=>{console.error(e),d.ZP.error("获取验证码失败，请重试")})})(p,"set_password"),children:"获取验证码"})]})]})]})},{})},{path:"/register",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)(""),[a,t]=(0,m.useState)(""),[l,r]=(0,m.useState)(""),[n,o]=(0,m.useState)(""),[u,v]=(0,m.useState)(!0),[j,p]=(0,m.useState)(!0),[g,f]=(0,m.useState)(!0),[N,w]=(0,m.useState)(!1),[y,k]=(0,m.useState)(60),_=(0,c.s0)();return(0,m.useEffect)(()=>{if(N){let e=setTimeout(()=>{y>0?k(e=>e-1):(w(!1),k(60),clearTimeout(e))},1e3)}},[y,N]),(0,i.jsxs)("div",{className:"mobileSignUp-wrap",children:[(0,i.jsx)("div",{className:"header-box",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/join.png",alt:""})}),(0,i.jsxs)("div",{className:"form-box",children:[(0,i.jsxs)("div",{className:"form-title-box",children:[(0,i.jsx)("div",{className:"logo-box",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/muxilogo.png",alt:""})}),(0,i.jsx)("div",{className:"team-name-box",children:"木犀团队"})]}),(0,i.jsx)("div",{className:"account-box",children:(0,i.jsx)(b.Z,{className:"input-field",prefix:u?(0,i.jsx)(si.Z,{}):(0,i.jsx)(sn.Z,{}),onChange:e=>{s(e.target.value)},value:e,onBlur:()=>{v(/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/.test(e))},placeholder:"请输入邮箱",status:u?"":"error"})}),(0,i.jsx)("div",{className:"password-box",children:(0,i.jsx)(b.Z.Password,{className:"input-field",prefix:j?(0,i.jsx)(si.Z,{}):(0,i.jsx)(sn.Z,{}),onChange:e=>{t(e.target.value)},value:a,onBlur:()=>{a.length<6?(p(!1),d.ZP.error("密码不能少于6位")):p(!0)},placeholder:"请输入密码",status:j?"":"error"})}),(0,i.jsx)("div",{className:"check-password-box",children:(0,i.jsx)(b.Z.Password,{className:"input-field",prefix:g?(0,i.jsx)(si.Z,{}):(0,i.jsx)(sn.Z,{}),onChange:e=>{r(e.target.value)},onBlur:()=>{a===l?f(!0):(f(!1),d.ZP.error("密码不一致"))},value:l,placeholder:"请确认密码",status:g?"":"error"})}),(0,i.jsxs)("div",{className:"verification-code-box",children:[(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>{o(e.target.value)},value:n,placeholder:"验证码"}),N?(0,i.jsx)("div",{className:"countdown-box",children:`${y}s`}):(0,i.jsx)("div",{className:"get-verifyCode-btn",onClick:()=>{x("/auth/send-verification-code",{email:e,type:"register"},!1).then(e=>{let{code:s}=e;200===s?(w(!0),d.ZP.success("验证码已发送！")):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`)},e=>{console.error(e),d.ZP.error("获取验证码失败，请重试")})},children:"获取验证码"})]}),(0,i.jsxs)("div",{className:"btn-box",children:[(0,i.jsx)("div",{className:"signIn-btn",onClick:()=>_("/login"),children:"登录"}),(0,i.jsx)("div",{className:"signUp-btn",onClick:()=>{if(!u||!j||!g)return void d.ZP.error("注册信息填写有误，请重试！");x("/auth/register",{email:e,password:a,verify_code:n},!1).then(e=>{let{code:s}=e;200===s?(d.ZP.success("注册成功！"),localStorage.setItem("token",e.data.token),h("/schedule/create",!0),_("/app")):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`)},e=>{console.error(e),d.ZP.error("注册失败，请重试")})},children:"注册"})]})]})]})},{})},{path:"/",element:(0,i.jsx)(c.Fg,{to:"/join"})},{path:"/app",element:(0,i.jsx)(X,{})},{path:"/app/home",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)(""),[a,t]=(0,m.useState)(""),[l,r]=(0,m.useState)({avatar:"",name:"",nickname:"",school:"",email:"",group:"",student_id:"",qq:""}),[n,o]=(0,m.useState)(""),[u,v]=(0,m.useState)(""),[p,g]=(0,m.useState)(!1),[f,N]=(0,m.useState)(""),[w,y]=(0,m.useState)(""),[k,_]=(0,m.useState)(!1),[Z,C]=(0,m.useState)(""),[S,P]=(0,m.useState)(!1),[F,$]=(0,m.useState)(!1),[B,E]=(0,m.useState)(60);(0,m.useEffect)(()=>{if(F){let e=setTimeout(()=>{B>0?E(e=>e-1):($(!1),E(60),clearTimeout(e))},1e3)}},[B,F]),(0,m.useEffect)(()=>{h("/users/my-info",!0).then(e=>{let{data:s}=e;r(s)},e=>{console.error(e),d.ZP.error("获取个人信息失败，请重试")}),h("/auth/get-qntoken",!0).then(e=>{let{QiniuToken:a}=e.data;s(a);let l={useCdnDomain:!0,region:ei.KM.z2};ei.M$(l,a).then(e=>{t(e)})})},[]);let[M,D]=(0,m.useState)([]),q=()=>{g(!1),o(""),v(""),$(!1),E(60)},z=(e,s)=>{x("/auth/send-verification-code",{email:e,type:s},!1).then(e=>{let{flag:s}=e.data;s&&(d.ZP.success("验证码已发送！"),$(!0))},e=>{console.error(e),d.ZP.error("获取验证码失败，请重试")})},I=()=>{P(!1),v(""),C(""),$(!1),E(60)},O=(0,c.s0)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"personalPage-wrap",children:[(0,i.jsx)("div",{className:"back-btn-box",onClick:()=>{O(-1)},children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/back.png",alt:""})}),(0,i.jsxs)("div",{className:"header-box",children:[(0,i.jsx)("div",{className:"background-box",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/join.png",alt:""})}),(0,i.jsx)("div",{className:"title-box",children:"个人主页"})]}),(0,i.jsx)(el.Z,{children:(0,i.jsx)(et.Z,{action:a,data:{token:e},fileList:M,onChange:e=>{let{fileList:s}=e;D(s);let a=s[0].response;if(a){let e=`https://ossfresh-test.muxixyz.com/${a.key}`,s={avatar:e,name:l.name,nickname:l.nickname,school:l.school,qq:l.qq};r({...l,avatar:e}),x("/users/",s,!0).then(e=>{200===e.code?d.ZP.success("更改成功！"):d.ZP.error("更换头像失败，请重试！")},e=>{console.error(e),d.ZP.error("更换头像失败，请重试！")})}},showUploadList:!1,maxCount:1,children:(0,i.jsx)("div",{className:"avatar-box",children:(0,i.jsx)("img",{src:l.avatar,alt:""})})})}),(0,i.jsxs)("div",{className:"info-box1",children:[(0,i.jsx)("div",{className:"nickname-box",children:l.nickname}),(0,i.jsx)("div",{className:"email-box",children:l.email})]}),(0,i.jsxs)("div",{className:"info-box2",children:[(0,i.jsxs)("div",{className:"info-box2-box1",children:[(0,i.jsx)("img",{className:"box-logo",src:"https://muxi-fresh.muxixyz.com/fe-static/name.png",alt:""}),(0,i.jsx)("div",{className:"box-title",children:"姓名学号"}),(0,i.jsx)("div",{className:"box-content",children:`${l.name} ${l.student_id}`})]}),(0,i.jsxs)("div",{className:"info-box2-box2",children:[(0,i.jsx)("img",{className:"box-logo",src:"https://muxi-fresh.muxixyz.com/fe-static/group.png",alt:""}),(0,i.jsx)("div",{className:"box-title",children:"所在组别"}),(0,i.jsx)("div",{className:"box-content",children:l.group})]})]}),(0,i.jsxs)("div",{className:"change-info-box",children:[(0,i.jsx)("div",{className:"box-title",children:"信息修改"}),(0,i.jsxs)("div",{className:"change-studentId-box",onClick:()=>{_(!0)},children:[(0,i.jsx)("img",{className:"box-logo",src:"https://muxi-fresh.muxixyz.com/fe-static/studentIdIcon.png",alt:""}),(0,i.jsx)("div",{className:"box-title",children:"绑定/修改学号"})]}),(0,i.jsxs)("div",{className:"change-email-box",onClick:()=>{g(!0)},children:[(0,i.jsx)("img",{className:"box-logo",src:"https://muxi-fresh.muxixyz.com/fe-static/emailIcon.png",alt:""}),(0,i.jsx)("div",{className:"box-title",children:"修改邮箱"})]}),(0,i.jsxs)("div",{className:"change-password-box",onClick:()=>{P(!0)},children:[(0,i.jsx)("img",{className:"box-logo",src:"https://muxi-fresh.muxixyz.com/fe-static/passwordIcon.png",alt:""}),(0,i.jsx)("div",{className:"box-title",children:"修改密码"})]})]})]}),(0,i.jsxs)(es.Z,{className:"mobile-studentId-modal",open:k,onOk:()=>{x("/auth/set-student-id",{student_id:f,password:w},!0).then(e=>{200===e.code?(r({...l,student_id:f}),e.data.flag&&d.ZP.success("学号绑定成功！"),N("")):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`),y("")},e=>{console.error(e),d.ZP.error("学号绑定失败，请重试！"),y("")}),_(!1)},onCancel:()=>{_(!1),N(""),y("")},okText:"确认",cancelText:"取消",centered:!0,children:[(0,i.jsxs)("div",{className:"studentId-box",children:[(0,i.jsx)("div",{className:"box-label",children:"学号:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>N(e.target.value),value:f,placeholder:"请输入学号"})]}),(0,i.jsxs)("div",{className:"password-box",children:[(0,i.jsx)("div",{className:"box-label",children:"密码:"}),(0,i.jsx)(b.Z.Password,{className:"input-field",value:w,onChange:e=>y(e.target.value),placeholder:"请输入一站式密码"})]})]}),(0,i.jsxs)(es.Z,{className:"mobile-email-modal",open:p,onOk:()=>{x("/auth/email",{email:n,verify_code:u},!0).then(e=>{200===e.code?(r({...l,email:n}),e.data.flag&&d.ZP.success("邮箱绑定成功！")):d.ZP.error("邮箱绑定失败，请重试！"),q()},e=>{console.error(e),d.ZP.error("邮箱绑定失败，请重试！"),q()}),g(!1)},onCancel:q,okText:"确认",cancelText:"取消",centered:!0,children:[(0,i.jsxs)("div",{className:"email-box",children:[(0,i.jsx)("div",{className:"box-label",children:"邮箱:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>o(e.target.value),value:n,type:"email",placeholder:"请输入邮箱"})]}),(0,i.jsxs)("div",{className:"verifyCode-box",children:[(0,i.jsx)("div",{className:"box-label",children:"验证码:"}),(0,i.jsx)(b.Z,{className:"input-field",value:u,onChange:e=>v(e.target.value)}),F?(0,i.jsx)("div",{className:"countdown-box",children:`${B}s`}):(0,i.jsx)("div",{className:"get-verifyCode-btn",onClick:()=>z(n,"set_email"),children:"获取验证码"})]})]}),(0,i.jsxs)(es.Z,{className:"mobile-password-modal",open:S,onOk:()=>{x("/auth/auth-set-password",{email:l.email,verify_code:u},!0).then(e=>{if(200===e.code){let{auth_set_password_token:s}=e.data;j("/auth/set-password",{password:Z},s).then(e=>{200===e.code?d.ZP.success("修改密码成功！"):d.ZP.error("修改密码失败，请重试！"),I()},e=>{console.error(e),d.ZP.error("修改密码失败，请重试！"),I()})}else d.ZP.error("验证码错误，请重试！"),I()},e=>{console.error(e),d.ZP.error("修改密码失败，请重试！"),I()})},onCancel:I,okText:"确认",cancelText:"取消",centered:!0,children:[(0,i.jsxs)("div",{className:"password-box",children:[(0,i.jsx)("div",{className:"box-label",children:"新密码:"}),(0,i.jsx)(b.Z.Password,{className:"input-field",onChange:e=>C(e.target.value),value:Z,placeholder:"请输入新密码"})]}),(0,i.jsxs)("div",{className:"verifyCode-box",children:[(0,i.jsx)("div",{className:"box-label",children:"验证码:"}),(0,i.jsx)(b.Z,{className:"input-field",value:u,onChange:e=>v(e.target.value)}),F?(0,i.jsx)("div",{className:"countdown-box",children:`${B}s`}):(0,i.jsx)("div",{className:"get-verifyCode-btn",onClick:()=>z(l.email,"set_password"),children:"获取验证码"})]})]})]})},{})},{path:"/app/form",element:(0,i.jsx)(()=>{let e=(0,c.s0)(),[s,a]=(0,m.useState)(""),[t,l]=(0,m.useState)(""),[r,n]=(0,m.useState)(0),[o,u]=(0,m.useState)(""),[j,p]=(0,m.useState)(""),[g,f]=(0,m.useState)(""),[N,w]=(0,m.useState)(""),[y,k]=(0,m.useState)(""),[Z,C]=(0,m.useState)(""),[S,P]=(0,m.useState)(""),[F,$]=(0,m.useState)(""),[B,E]=(0,m.useState)(""),[M,D]=(0,m.useState)({email:"",qq:"",phone:""}),[q,z]=(0,m.useState)("请选择"),[I,O]=(0,m.useState)("选填"),[L,T]=(0,m.useState)(""),[A,U]=(0,m.useState)(""),[Q,Y]=(0,m.useState)(""),[H,R]=(0,m.useState)(""),[V,W]=(0,m.useState)(""),[G,K]=(0,m.useState)(!1),[J,X]=(0,m.useState)(""),ee=(0,m.useMemo)(()=>e1(),[]),es=()=>{n(r+1)},ea=()=>{n(r-1)};(0,m.useEffect)(()=>{"email"==q&&d.ZP.info("邮箱请在个人主页修改")},[q]),(0,m.useEffect)(()=>{"email"==I&&d.ZP.info("邮箱请在个人主页修改")},[I]),(0,m.useEffect)(()=>{h("/form/view?entry_form_id=myself").then(e=>{200==e.code&&(K(!0),k(e.data.avatar),X(e.data.form_id),w(e.data.gender),$(e.data.major),E(e.data.grade),e.data.phone&&z("phone"),D(s=>({...s,phone:e.data.phone})),Y(e.data.group),T(e.data.reason),U(e.data.knowledge),R(e.data.self_intro),W(e.data.extra_question))}).catch(e=>{console.error(e)}),h("/users/my-info").then(e=>{u(e.data.name),C(e.data.student_id),p(e.data.nickname),f(e.data.avatar),P(e.data.school),e.data.qq&&O("qq"),D(s=>({...s,qq:e.data.qq,email:e.data.email}))}).catch(e=>{console.error(e)}),h("/auth/get-qntoken",!0).then(e=>{let{QiniuToken:s}=e.data;a(s);let t={useCdnDomain:!0,region:ei.KM.z2};ei.M$(t,s).then(e=>{l(e)})})},[]);let[er,en]=(0,m.useState)([]),[eo,ec]=(0,m.useState)(!1),ed=(0,m.useMemo)(()=>e2(),[]);(0,m.useEffect)(()=>{let e=new Date,s=new Date(e.getFullYear(),8,26,23,59,0);e>s&&(ec(!0),d.ZP.warning("未在报名时间内"))},[]);let em=[];return em[0]=(0,i.jsxs)("div",{className:"page_formM",children:[(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/back.png",className:"returnBtn_formM",onClick:()=>e("/app")}),(0,i.jsx)("div",{className:"top_title_formM",children:"报名表"}),(0,i.jsx)("div",{className:"details_formM formImg",children:"完善你的简历"}),(0,i.jsx)("div",{className:"details_formM break_formM",children:"让木犀团队更好地了解你吧"}),(0,i.jsxs)("div",{className:"mainbox_formM firstbox_formM",children:[(0,i.jsx)(el.Z,{children:(0,i.jsx)(et.Z,{action:t,data:{token:s},fileList:er,onChange:e=>{let{fileList:s}=e;en(s);let a=s[0].response;a&&k(`https://ossfresh-test.muxixyz.com/${a.key}`)},showUploadList:!1,maxCount:1,children:(0,i.jsx)("div",{className:"avatar_formM",children:y?(0,i.jsx)("img",{src:y}):(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/avatarDefault.png"})})})}),(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/camera.png",alt:"",className:"cameraImg"}),(0,i.jsx)("div",{className:"box_detail_formM",children:"点击上传你的照片"}),(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"姓名"})]}),(0,i.jsx)(b.Z,{className:"input_formM",placeholder:"请输入你的真实姓名",type:"text",value:o,onChange:e=>{u(e.target.value)}}),(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"性别"})]}),(0,i.jsxs)("div",{className:"sexbox_formM",children:[(0,i.jsxs)("div",{className:"sexboxleft male",onClick:()=>{w("male")},style:{backgroundColor:"male"==N?"":"#F5F5F5",border:"male"==N?"2px solid #5858AF":"2px solid  transparent"},children:[(0,i.jsx)("div",{className:"enmale",children:"Male"}),(0,i.jsx)("div",{className:"cnmale",children:"男生"})]}),"male"==N?(0,i.jsx)("img",{className:"checkedImg",src:"https://muxi-fresh.muxixyz.com/fe-static/checked.png"}):""]}),(0,i.jsxs)("div",{className:"sexbox_formM",children:[(0,i.jsxs)("div",{className:"sexboxleft female",onClick:()=>{w("female")},style:{backgroundColor:"female"==N?"":"#F5F5F5",border:"female"==N?"2px solid #5858AF":"2px solid  transparent"},children:[(0,i.jsx)("div",{className:"enmale",children:"Female"}),(0,i.jsx)("div",{className:"cnmale",children:"女生"})]}),"female"==N?(0,i.jsx)("img",{className:"checkedImg",src:"https://muxi-fresh.muxixyz.com/fe-static/checked.png"}):""]}),(0,i.jsx)("button",{className:"change_next_formM",disabled:!o||!N,onClick:es,style:o&&N?{backgroundColor:"#FFC93F",color:"#413E55"}:{backgroundColor:"#DADADA",color:"#FFFFFF"},children:"开始报名"})]})]}),em[1]=(0,i.jsxs)("div",{className:"page_formM",children:[(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/back.png",className:"returnBtn_formM",onClick:ea}),(0,i.jsx)("div",{className:"top_title_formM",children:"个人信息"}),(0,i.jsxs)("div",{className:"mainbox_formM",children:[(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"学号"})]}),(0,i.jsx)(b.Z,{className:"input_formM",type:"text",value:Z,onClick:()=>void d.ZP.info("学号请在个人主页修改")}),(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"学院"})]}),(0,i.jsx)(_.Z,{id:"schoolSelect_formM",style:{width:"72vw"},value:S,size:"large",onChange:e=>P(e),options:ed}),(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"专业"})]}),(0,i.jsx)(b.Z,{className:"input_formM",placeholder:"请输入你的专业",type:"text",value:F,onChange:e=>{$(e.target.value)}}),(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"年级"})]}),(0,i.jsx)(_.Z,{id:"GradeSelect_formM",value:B,style:{width:"72vw"},size:"large",onChange:e=>E(e),children:ee.map(e=>(0,i.jsx)(_.Z.Option,{value:e.label,children:e.value}))}),(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"联系方式"})]}),(0,i.jsxs)("div",{className:"contactWaybox_formM",children:[(0,i.jsxs)("div",{className:"contactWayterm_formM",children:[(0,i.jsxs)(_.Z,{id:"contactWayselect1_formM",value:q,style:{width:"25vw"},size:"large",onChange:e=>{z(e)},children:[(0,i.jsx)(_.Z.Option,{value:"email",disabled:"email"==I,children:"邮箱"}),(0,i.jsx)(_.Z.Option,{value:"qq",disabled:"QQ"==I,children:"QQ"}),(0,i.jsx)(_.Z.Option,{value:"phone",disabled:"phone"==I,children:"手机"})]}),(0,i.jsx)(b.Z,{type:"text",className:"contactContent_formM",placeholder:"请输入",disabled:"email"==q,name:q,value:M[q],onChange:e=>D(s=>({...s,[e.target.name]:e.target.value}))})]}),(0,i.jsxs)("div",{className:"contactWayterm_formM",children:[(0,i.jsxs)(_.Z,{id:"contactWayselect2_formM",value:I,style:{width:"25vw"},size:"large",onChange:e=>O(e),children:[(0,i.jsx)(_.Z.Option,{value:"email",disabled:"email"==q,children:"邮箱"}),(0,i.jsx)(_.Z.Option,{value:"qq",disabled:"QQ"==q,children:"QQ"}),(0,i.jsx)(_.Z.Option,{value:"phone",disabled:"phone"==q,children:"手机"})]}),(0,i.jsx)(b.Z,{type:"text",className:"contactContent_formM",name:I,value:M[I],disabled:"email"==I,onChange:e=>D(s=>({...s,[e.target.name]:e.target.value}))})]})]}),(0,i.jsx)("button",{className:"change_next_formM",onClick:es,children:"Next →"})]})]}),em[2]=(0,i.jsxs)("div",{className:"page_formM",children:[(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/back.png",className:"returnBtn_formM",onClick:ea}),(0,i.jsx)("div",{className:"top_title_formM",children:"报名信息"}),(0,i.jsx)("img",{src:"",alt:""}),(0,i.jsxs)("div",{className:"mainbox_formM",children:[(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"心动组别"})]}),(0,i.jsx)("div",{className:"groupSelectBox",children:(0,i.jsxs)(_.Z,{id:"GroupSelect_formM",value:Q,size:"large",style:{width:"27vw"},onChange:e=>Y(e),children:[(0,i.jsx)(_.Z.Option,{value:"Product",children:"产品组"}),(0,i.jsx)(_.Z.Option,{value:"Design",children:"设计组"}),(0,i.jsx)(_.Z.Option,{value:"Frontend",children:"前端组"}),(0,i.jsx)(_.Z.Option,{value:"Backend",children:"后端组"})]})}),(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"心动理由"})]}),(0,i.jsx)("textarea",{maxLength:500,name:"",id:"group_reason_formM",placeholder:"请输入你的理由",value:L,onChange:e=>T(e.target.value)}),(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"对组别的认识"})]}),(0,i.jsx)("textarea",{maxLength:500,name:"",id:"group_know_formM",placeholder:"请输入你对所选组别的了解",value:A,onChange:e=>U(e.target.value)}),(0,i.jsx)("button",{className:"change_next_formM",onClick:es,children:"Next →"})]})]}),em[3]=(0,i.jsxs)("div",{className:"page_formM",children:[(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/back.png",className:"returnBtn_formM",onClick:ea}),(0,i.jsx)("div",{className:"top_title_formM",children:"个人自述"}),(0,i.jsxs)("div",{className:"mainbox_formM",children:[(0,i.jsxs)("div",{className:"self_tip",children:[(0,i.jsx)("span",{className:"yellow",children:"提示: "}),(0,i.jsx)("span",{className:"grey",children:"进行一个自我介绍，内容需要包含自己的性格、能力、获得过的相关的成就以及假如自己进入木犀后的想法，可加入其他内容。"})]}),(0,i.jsxs)("div",{className:"term_detail_box_formM",children:[(0,i.jsx)("div",{className:"yellowBot"}),(0,i.jsx)("div",{className:"term_detail_formM",children:"自我介绍"})]}),(0,i.jsx)("textarea",{maxLength:500,name:"",id:"self_introduction_formM",placeholder:" ",value:H,onChange:e=>R(e.target.value)}),(0,i.jsx)("button",{className:"change_next_formM",onClick:es,children:"Next →"})]})]}),em[4]=(0,i.jsxs)("div",{className:"page_formM",children:[(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/back.png",className:"returnBtn_formM",onClick:ea}),(0,i.jsx)("img",{className:"muxiplanet",src:"https://muxi-fresh.muxixyz.com/fe-static/MuXi.png",alt:""}),(0,i.jsx)("div",{className:"top_title_formM",children:"小问题"}),(0,i.jsxs)("div",{className:"mainbox_formM lastbox_formM",children:[(0,i.jsxs)("div",{className:"questionbox_formM",children:[(0,i.jsx)("span",{className:"yellowBot",style:{display:"inline-block",marginLeft:"6vw",marginRight:"3vw"}}),(0,i.jsx)("span",{className:"question_formM",children:"你是否有加入/正在加入一些其他组织或担任学生工作"})]}),(0,i.jsx)("div",{className:"answerbox_formM",children:(0,i.jsxs)(eJ.ZP.Group,{onChange:e=>W(e.target.value),value:V,children:[(0,i.jsx)(eJ.ZP,{value:"Y",children:"是"}),(0,i.jsx)(eJ.ZP,{value:"N",children:"否"})]})}),(0,i.jsx)("button",{className:"change_next_formM",onClick:eo?()=>{d.ZP.warning("未在报名时间内")}:G?eE(()=>{let s=[o,N,B,F,S,Q,L,A,H,V],a=["请输入姓名","请选择性别","请输入年级","请输入专业","请选择学院","请选择心动组别","请输入心动理由","请输入对组别了解","请填写自我介绍","请回答额外问题"];for(let e=0;e<s.length;e++){if(""===s[e])return void d.ZP.info(a[e]);if(""==M.qq&&""==M.phone)return void d.ZP.info("请至少输入QQ或手机中的一项")}v("/form/",{form_id:J,avatar:y,major:F,grade:B,gender:N,phone:M.phone,group:Q,reason:L,knowledge:A,self_intro:H,extra_question:V}).then(e=>{200===e.code?d.ZP.success("提交成功^_^"):d.ZP.error("提交失败")}).catch(e=>{console.error(e)}),x("/users/",{avatar:g,name:o,nickname:j,qq:M.qq,school:S}).catch(e=>{console.error(e)}),setTimeout(()=>{e("/app")},1e3)},400):eE(()=>{let s=[o,N,B,F,S,Q,L,A,H,V,y],a=["请输入姓名","请选择性别","请输入年级","请输入专业","请选择学院","请选择心动组别","请输入心动理由","请输入对组别了解","请填写自我介绍","请回答额外问题","请上传证件照"];for(let e=0;e<s.length;e++){if(""===s[e])return void d.ZP.info(a[e]);if(""==M.qq&&""==M.phone)return void d.ZP.info("请至少输入QQ或手机中的一项")}x("/form/",{avatar:y,major:F,grade:B,gender:N,phone:M.phone,group:Q,reason:L,knowledge:A,self_intro:H,extra_question:V}).then(e=>{200===e.code?d.ZP.success("提交成功^_^"):d.ZP.error("提交失败")}).catch(e=>{console.error(e)}),x("/users/",{avatar:g,name:o,nickname:j,qq:M.qq,school:S}).catch(e=>{console.error(e)}),setTimeout(()=>{e("/app")},1e3)},400),children:"提交报名表"})]})]}),(0,i.jsx)("div",{children:em[r]})},{})},{path:"/app/progress",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)({name:"",school:"",major:"",group:Z.Product,entry_form_status:"",admission_status:""}),[a,t]=(0,m.useState)({current:0,status:"wait"}),[l,r]=(0,m.useState)(!0);(0,m.useEffect)(()=>{h("/schedule/?schedule_id=myself",!0).then(e=>{if(200===e.code){s(e.data),r(!1);let{admission_status:a}=e.data;"已报名"===a?t({current:0,status:"finish"}):"实习期"===a?t({current:1,status:"process"}):"已转正"===a&&t({current:2,status:"finish"})}else d.ZP.error("查询进度失败，请重试！")},e=>{console.error(e),d.ZP.error("查询进度失败，请重试！")})},[]);let n=(0,c.s0)();return(0,i.jsxs)("div",{className:"mobileProgress-wrap",children:[(0,i.jsxs)("div",{className:"header-box",children:[(0,i.jsx)("div",{className:"back-btn-box",onClick:()=>{n(-1)},children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/back.png",alt:""})}),(0,i.jsx)("div",{className:"title-box",children:"进度查询"})]}),(0,i.jsxs)("div",{className:"content-box",children:[(0,i.jsx)(so.Z,{className:"step",current:a.current,status:a.status,responsive:!1,direction:"horizontal",items:[{title:"已报名",description:""},{title:"实习期",description:""},{title:"已转正",description:""}]}),(0,i.jsxs)("table",{className:"progress-table",cellSpacing:0,children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"姓名"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.name})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"学院"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.school})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"专业"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.major})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"报名组别"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:{Backend:"后端组",Design:"设计组",Frontend:"前端组",Product:"产品组"}[e.group]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"报名表状态"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.entry_form_status})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"录取状态"}),l?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.admission_status})]})]})]})]})]})},{})},{path:"/app/homework",element:(0,i.jsx)(ec,{}),children:[{path:"user",element:(0,i.jsx)(eG,{}),children:[{path:"submit",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)(),[a,t]=(0,m.useState)(!1),[l,r]=(0,m.useState)(""),[n,o]=(0,m.useState)(),[c,d]=(0,m.useState)(),[u,x]=(0,m.useState)(),[v,j]=(0,m.useState)([{id:"",text:"暂时没有作业"}]);return(0,m.useEffect)(()=>{e&&h(`/task/assigned/list?group=${e.value}`).then(e=>{j([{id:"",text:"暂时没有作业"}]),t(!1),e.data.titles&&j(e.data.titles.reverse())},null)},[e]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(B.ZP,{theme:{token:{colorPrimary:"#FFC93F"}},children:(0,i.jsxs)(e5,{title:"提交作业",backPath:"/app",children:[(0,i.jsx)(e9,{onChange:e=>{s(e)}}),(0,i.jsxs)("div",{className:"user-mobile-drop",children:["选择作业 : ",(0,i.jsx)(e$,{pure:!0,type:"user",data:v,onSwitch:(e,s)=>{h(`/task/assigned/${s}/status`).then(e=>{x(void 0),-1!=e.code&&"未提交"!=e.data.task_status?h(`/task/submitted?user_id=myself&assigned_task_id=${s}`).then(s=>{var a,l;x(s.data.urls),t((null==(a=e.data)?void 0:a.task_status)==="已审阅"),r(null==(l=s.data)?void 0:l.submission_id)},null):(x(void 0),t(!1))},null),d(s),o(e)}})]}),a?(0,i.jsx)(ss,{currentTaskInfo:n,uploadHistory:u,submissionID:l}):(0,i.jsx)(e7,{currentTaskID:c,currentTaskInfo:n,uploadHistory:u})]})})})},{})}]}]}]:[{path:"/join",element:(0,i.jsx)(function(){let e=(0,c.s0)();return(0,i.jsxs)("div",{className:"join-wrap",children:[(0,i.jsx)("div",{className:"logo-box",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/muxistudio.png",alt:"#"})}),(0,i.jsxs)("div",{className:"join-btn-box",children:[(0,i.jsx)("span",{className:"join-btn",onClick:()=>window.open("https://muxi-tech.xyz/"),children:"进入官网"}),(0,i.jsx)("span",{className:"join-btn",onClick:()=>e("/app"),children:"加入我们"}),(0,i.jsx)("span",{className:"join-btn",onClick:()=>window.open("https://muxi-studio.github.io/101/"),children:"木犀101"})]})]})},{})},{path:"/login",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)(""),[a,t]=(0,m.useState)(""),[l,r]=(0,m.useState)(""),[n,o]=(0,m.useState)(""),[u,h]=(0,m.useState)(""),[v,p]=(0,m.useState)(""),[g,f]=(0,m.useState)(""),[N,w]=(0,m.useState)(!1),[y,k]=(0,m.useState)(!1),[_,Z]=(0,m.useState)(60),C=(0,c.s0)();(0,m.useEffect)(()=>{if(y){let e=setTimeout(()=>{_>0?Z(e=>e-1):(k(!1),Z(60),clearTimeout(e))},1e3)}},[_,y]);let S=()=>{w(!1),h(""),p(""),f(""),k(!1),Z(60)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"signIn-box",children:(0,i.jsxs)("div",{className:"signIn-wrap",children:[(0,i.jsxs)("div",{className:"signIn-img-box",children:[(0,i.jsx)("img",{className:"signIn-background",src:"https://muxi-fresh.muxixyz.com/fe-static/signInImg.png",alt:""}),(0,i.jsx)("div",{className:"logo-box1",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E7%BB%84%208%402x.png",alt:""})}),(0,i.jsx)("div",{className:"logo-box2",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E7%BB%84%209%402x.png",alt:""})}),(0,i.jsx)("div",{className:"logo-box3",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E7%BB%84%2011%402x.png",alt:""})}),(0,i.jsx)("div",{className:"logo-box4",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E7%BB%84%2012%402x.png",alt:""})}),(0,i.jsx)("div",{className:"logo-text",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/MUXI%20STUDIO%404x.png",alt:""})})]}),(0,i.jsxs)("div",{className:"signIn-form",children:[(0,i.jsxs)("div",{className:"email-box",children:[(0,i.jsx)("div",{className:"box-label",children:"账号:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>{r(e.target.value)},value:l})]}),(0,i.jsxs)("div",{className:"password-box",children:[(0,i.jsx)("div",{className:"box-label",children:"密码:"}),(0,i.jsx)(b.Z.Password,{className:"input-field",onChange:e=>{o(e.target.value)},value:n})]}),(0,i.jsx)("div",{className:"forget-password-box",children:(0,i.jsx)("span",{className:"box-content",onClick:()=>{w(!0)},children:"忘记密码？"})}),(0,i.jsxs)("div",{className:"btn-box",children:[(0,i.jsx)("div",{className:"signIn-btn",onClick:()=>{/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/.test(l)?x("/auth/login",{user_name:l,password:n},!1).then(e=>{200===e.code?(localStorage.setItem("token",e.data.token),d.ZP.success("登录成功！"),C("/app")):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}`)},e=>{console.error(e),d.ZP.error("登录失败，请重试！")}):x("/auth/ccnuLogin",{student_id:l,password:n},!1).then(e=>{200===e.code?(localStorage.setItem("token",e.data.token),d.ZP.success("登录成功！"),C("/app")):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`)},e=>{console.error(e),d.ZP.error("登录失败，请重试！")})},children:"登录"}),(0,i.jsx)("div",{className:"signUp-btn",onClick:()=>{C("/register")},children:"注册"})]})]})]})}),(0,i.jsxs)(es.Z,{className:"forget-password-modal",open:N,onOk:()=>/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/.test(v)?""===u?void d.ZP.error("请填写验证码！"):void x("/auth/auth-set-password",{email:v,verify_code:u},!0).then(e=>{if(200===e.code){let{auth_set_password_token:s}=e.data;j("/auth/set-password",{password:g},s).then(e=>{200===e.code?d.ZP.success("修改密码成功！"):d.ZP.error("修改密码失败，请重试！"),S()},e=>{console.error(e),d.ZP.error("修改密码失败，请重试！"),S()})}else d.ZP.error("验证码错误，请重试！"),S()},e=>{console.error(e),d.ZP.error("修改密码失败，请重试！"),S()}):void d.ZP.error("邮箱填写有误，请重试！"),onCancel:S,okText:"确认",cancelText:"取消",centered:!0,children:[(0,i.jsxs)("div",{className:"email-box",children:[(0,i.jsx)("div",{className:"box-label",children:"邮箱:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>p(e.target.value),value:v,placeholder:"请输入邮箱"})]}),(0,i.jsxs)("div",{className:"password-box",children:[(0,i.jsx)("div",{className:"box-label",children:"新密码:"}),(0,i.jsx)(b.Z.Password,{className:"input-field",onChange:e=>f(e.target.value),value:g,placeholder:"请输入新密码"})]}),(0,i.jsxs)("div",{className:"verifyCode-box",children:[(0,i.jsx)("div",{className:"box-label",children:"验证码:"}),(0,i.jsx)(b.Z,{className:"input-field",value:u,onChange:e=>h(e.target.value),required:!0}),y?(0,i.jsx)("div",{className:"countdown-box",children:`${_}s`}):(0,i.jsx)("div",{className:"get-verifyCode-btn",onClick:()=>((e,s)=>{let a=/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/.test(e);if(!a){console.log(a),d.ZP.error("邮箱填写有误，请重试！");return}x("/auth/send-verification-code",{email:e,type:s},!1).then(e=>{let{code:s}=e;200===s?(d.ZP.success("验证码已发送！"),k(!0)):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`)},e=>{console.error(e),d.ZP.error("获取验证码失败，请重试")})})(v,"set_password"),children:"获取验证码"})]})]})]})},{})},{path:"/register",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)(""),[a,t]=(0,m.useState)(""),[l,r]=(0,m.useState)(""),[n,o]=(0,m.useState)(""),[u,v]=(0,m.useState)(!0),[j,p]=(0,m.useState)(!0),[g,f]=(0,m.useState)(!0),[N,w]=(0,m.useState)(!1),[y,k]=(0,m.useState)(60),_=(0,c.s0)();return(0,m.useEffect)(()=>{if(N){let e=setTimeout(()=>{y>0?k(e=>e-1):(w(!1),k(60),clearTimeout(e))},1e3)}},[y,N]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"signUp-box",children:(0,i.jsxs)("div",{className:"signUp-wrap",children:[(0,i.jsxs)("div",{className:"signUp-img-box",children:[(0,i.jsx)("img",{className:"signUp-background",src:"https://muxi-fresh.muxixyz.com/fe-static/signInImg.png",alt:""}),(0,i.jsx)("div",{className:"logo-box1",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E7%BB%84%208%402x.png",alt:""})}),(0,i.jsx)("div",{className:"logo-box2",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E7%BB%84%209%402x.png",alt:""})}),(0,i.jsx)("div",{className:"logo-box3",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E7%BB%84%2011%402x.png",alt:""})}),(0,i.jsx)("div",{className:"logo-box4",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/%E7%BB%84%2012%402x.png",alt:""})}),(0,i.jsx)("div",{className:"logo-text",children:(0,i.jsx)("img",{src:"https://ossfresh-test.muxixyz.com/MUXI%20STUDIO%404x.png",alt:""})})]}),(0,i.jsxs)("div",{className:"signUp-form",children:[(0,i.jsxs)("div",{className:"email-box",children:[(0,i.jsx)("div",{className:"box-label",children:"邮箱:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>{s(e.target.value)},onBlur:()=>{v(/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/.test(e))},value:e,status:u?"":"error"})]}),(0,i.jsxs)("div",{className:"verifyCode-box",children:[(0,i.jsx)("div",{className:"box-label",children:"验证码:"}),(0,i.jsx)(b.Z,{className:"input-field",onChange:e=>{o(e.target.value)},value:n}),N?(0,i.jsx)("div",{className:"countdown-box",children:`${y}s`}):(0,i.jsx)("div",{className:"get-verifyCode-btn",onClick:()=>{x("/auth/send-verification-code",{email:e,type:"register"},!1).then(e=>{let{code:s}=e;200===s?(w(!0),d.ZP.success("验证码已发送！")):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`)},e=>{console.error(e),d.ZP.error("获取验证码失败，请重试")})},children:"获取验证码"})]}),(0,i.jsxs)("div",{className:"password-box",children:[(0,i.jsx)("div",{className:"box-label",children:"密码:"}),(0,i.jsx)(b.Z.Password,{className:"input-field",onChange:e=>{t(e.target.value)},value:a,onBlur:()=>{a.length<6?p(!1):p(!0)}})]}),(0,i.jsxs)("div",{className:"check-password-box",children:[(0,i.jsx)("div",{className:"box-label",children:"确认密码:"}),(0,i.jsx)(b.Z.Password,{className:"input-field",onChange:e=>{r(e.target.value)},value:l,onBlur:()=>{a===l?f(!0):f(!1)}})]}),(0,i.jsx)("div",{className:"btn-box",children:(0,i.jsx)("div",{className:"signUp-btn",onClick:()=>{if(!u||!j||!g)return void d.ZP.error("注册信息填写有误，请重试！");x("/auth/register",{email:e,password:a,verify_code:n},!1).then(e=>{let{code:s}=e;200===s?(d.ZP.success("注册成功！"),localStorage.setItem("token",e.data.token),h("/schedule/create",!0),_("/app")):d.ZP.error(`${e.msg}\u{FF0C}\u{8BF7}\u{91CD}\u{8BD5}\u{FF01}`)},e=>{console.error(e),d.ZP.error("注册失败，请重试")})},children:"注册"})})]})]})})})},{})},{path:"/",element:(0,i.jsx)(c.Fg,{to:"/join"})},{path:"/app",element:(0,i.jsx)(X,{}),children:[{path:"",element:(0,i.jsx)(c.Fg,{to:"/app/form"})},{path:"home",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)(!1),[a,t]=(0,m.useState)(""),[l,r]=(0,m.useState)(""),[n,o]=(0,m.useState)({avatar:"",name:"",nickname:"",school:"",email:"",group:"",student_id:"",qq:""});(0,m.useEffect)(()=>{h("/users/my-info",!0).then(e=>{let{data:s}=e;o(s)},e=>{console.error(e),d.ZP.error("获取个人信息失败，请重试")}),h("/auth/get-qntoken",!0).then(e=>{let{QiniuToken:s}=e.data;t(s);let a={useCdnDomain:!0,region:ei.KM.z2};ei.M$(a,s).then(e=>{r(e)})})},[]);let[c,u]=(0,m.useState)([]),v=e=>{let{fileList:s}=e;u(s);let a=s[0].response;if(console.log("response",null==a?void 0:a.key),a){let e=`https://ossfresh-test.muxixyz.com/${a.key}`,s={avatar:e,name:n.name,nickname:n.nickname,school:n.school,qq:n.qq};o({...n,avatar:e}),x("/users/",s,!0).then(e=>{200===e.code?d.ZP.success("更改成功！"):d.ZP.error("更换头像失败，请重试！")},e=>{console.error(e),d.ZP.error("更换头像失败，请重试！")})}},j=()=>{s(e=>!e)};return(0,i.jsxs)("div",{className:"homePage-wrap",children:[(0,i.jsx)("div",{className:"homePage-header",children:"个人主页"}),(0,i.jsxs)("div",{className:"person-info-box",children:[(0,i.jsxs)("div",{className:"avatar-box",children:[(0,i.jsx)(el.Z,{children:(0,i.jsx)(et.Z,{action:l,data:{token:a},fileList:c,onChange:v,showUploadList:!1,maxCount:1,children:(0,i.jsx)("div",{className:"avatar",children:(0,i.jsx)("img",{src:n.avatar,alt:""})})})}),(0,i.jsx)(el.Z,{children:(0,i.jsx)(et.Z,{action:l,data:{token:a},fileList:c,onChange:v,showUploadList:!1,maxCount:1,children:(0,i.jsx)("div",{className:"change-avatar-box",children:(0,i.jsx)("div",{className:"change-avatar-btn",children:"更换头像"})})})})]}),e?(0,i.jsx)(eo,{changeEditState:j}):(0,i.jsx)(en,{changeEditState:j})]}),(0,i.jsxs)("div",{className:"flower-box",children:[(0,i.jsx)("div",{className:"flower1",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/muxilogo.png",alt:""})}),(0,i.jsx)("div",{className:"flower2",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/muxilogo2.png",alt:""})}),(0,i.jsx)("div",{className:"flower3",children:(0,i.jsx)("img",{src:"https://muxi-fresh.muxixyz.com/fe-static/muxilogo.png",alt:""})})]})]})},{})},{path:"form",element:(0,i.jsx)(e8,{})},{path:"form/:user_id/:form_id",element:(0,i.jsx)(e8,{})},{path:"progress",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)({name:"",school:"",major:"",group:Z.Product,entry_form_status:"",admission_status:""}),[a,t]=(0,m.useState)(!0);return(0,m.useEffect)(()=>{h("/schedule/?schedule_id=myself",!0).then(e=>{200===e.code?(s(e.data),t(!1)):d.ZP.error("查询进度失败，请重试！")},e=>{console.error(e),d.ZP.error("查询进度失败，请重试！")})},[]),(0,i.jsx)("div",{className:"progress-wrap",children:(0,i.jsxs)("table",{className:"progress-table",cellSpacing:0,children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("th",{className:"table-title",colSpan:2,children:"木犀招新进度查询"})})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"姓名"}),a?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.name})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"学院"}),a?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.school})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"专业"}),a?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.major})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"报名组别"}),a?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:{Backend:"后端组",Design:"设计组",Frontend:"前端组",Product:"产品组"}[e.group]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"报名表状态"}),a?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.entry_form_status})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"tr-title",children:"录取状态"}),a?(0,i.jsx)(ea.Z,{}):(0,i.jsx)("td",{className:"tr-content",children:e.admission_status})]})]})]})})},{})},{path:"homework",element:(0,i.jsx)(ec,{}),children:[{path:"admin",element:(0,i.jsx)(()=>{let e=(0,c.s0)();return(0,m.useEffect)(()=>{h("/form/judge").then(s=>{console.log("admin"===s.data.user_type),"admin"!==s.data.user_type&&"super_admin"!==s.data.user_type&&(d.ZP.error("无权限访问").then(null,null),e("/app/homework/user/submit"))},null)},[e]),(0,i.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(c.j3,{})})},{}),children:[{path:"new",element:(0,i.jsx)(()=>(0,i.jsx)(ez,{title:"新作业",button_title:"确认提交",choice:"new"}),{})},{path:"edit",element:(0,i.jsx)(()=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ez,{})}),{})},{path:"judge",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)([]),[a,t]=(0,m.useState)(""),l=(0,c.s0)(),[r]=(0,o.lr)(),n=JSON.parse(decodeURI(r.get("infoItem")));(0,m.useEffect)(()=>{a&&u(),n||(d.ZP.error("请先选择作业").then(null,null),setTimeout(()=>{l("/app/homework/admin/browse")},1e3))},[a]);let u=()=>{h(`/task/submitted/${a}/comment`).then(e=>{var a;let t=null==(a=e.data)?void 0:a.comments.reverse();console.log(t),t&&s(t)},null)};return(0,i.jsxs)("div",{className:"judge-wrap",children:[(0,i.jsx)("div",{className:"preview",children:(0,i.jsx)(eg,{getSubmittionID:e=>{t(e)},info:n})}),(0,i.jsxs)("div",{className:"comment-write",children:[(0,i.jsx)(eQ,{style:{scrollSnapAlign:"start",scrollSnapStop:"always"},onCommentSubmit:e=>{x(`/task/submitted/${a}/comment`,{content:e}).then(()=>{d.ZP.success("评论已提交").then(null,null),u()},null)}}),(0,i.jsx)(eT,{style:{scrollSnapAlign:"start",scrollSnapStop:"always"},CommentData:e,SubmitId:a})]})]})},{})},{path:"browse",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)([]);return(0,i.jsx)("div",{className:"browse-wrapper",children:(0,i.jsxs)("div",{className:"browse-wrap",children:[(0,i.jsx)(em,{title:"选择组别",data:ev,onChange:e=>{h(`/task/assigned/list/selected?group=${e.value}&year=${new Date().getFullYear()}&semester=${S()}`).then(a=>{let t=null==a?void 0:a.titles;t?s(t.map(s=>({key:s.id,label:s.text,children:(0,i.jsx)(eH,{task_id:s.id,group:e.value})})).reverse()):(d.ZP.info("暂无作业\uD83D\uDE35").then(null,null),s([{key:"",label:"暂无作业\uD83D\uDE35",children:(0,i.jsx)("div",{style:{height:"40vh"},children:(0,i.jsx)(eV,{})})}]))},null)},className:"browse-selector"}),(0,i.jsx)(eW.Z,{bordered:!1,items:e,className:"browse-collapse"})]})})},{})}]},{path:"user",element:(0,i.jsx)(eG,{}),children:[{path:"submit",element:(0,i.jsx)(()=>{var e,s,a,t;let[l,r]=(0,m.useState)(0),[n,o]=(0,m.useState)([{id:"123",text:"123"}]),[c,u]=(0,m.useState)(!1),[v,j]=(0,m.useState)(0),[p,g]=(0,m.useState)([]),[f,b]=(0,m.useState)([""]),[N,w]=(0,m.useState)(""),[y,k]=(0,m.useState)({key:"后端组",value:"Backend"}),[Z,C]=(0,m.useState)([]),[P,F]=(0,m.useState)(""),[$,B]=(0,m.useState)(""),E=["未提交","已提交","已审阅"],M=p.map((e,s)=>({value:s,label:"提交"+s}));(0,m.useEffect)(()=>{u(!0),h("/form/view?entry_form_id=myself").then(e=>{let s=e.data.group;ev.forEach(e=>{s.includes(e.value)&&(k(e),h(`/task/assigned/list/selected?group=${e.value}&year=${new Date().getFullYear()}&semester=${S()}`).then(e=>{console.log(e),u(!1),e?(o(e.titles.reverse()),h(`/task/submitted?user_id=myself&assigned_task_id=${n[0].id}`).then(e=>{var s;console.log(e.data.submission_infos,"提交记录"),(null==(s=e.data)?void 0:s.submission_infos)&&e.data.submission_infos.length>0&&(g(e.data.submission_infos),F(e.data.submission_infos[l].submission_id||""),q(e.data.submission_infos[l].submission_id||""))},null)):o([{id:"",text:"暂时没有作业"}])},null))})},null)},[]);let D=e=>{e&&(w(e),h(`/task/assigned/${e}`).then(e=>{var s;(null==(s=e.data)?void 0:s.deadline)&&B(e.data.deadline)},null),h(`/task/assigned/${e}/status`).then(s=>{h(`/task/submitted?user_id=myself&assigned_task_id=${e}`).then(e=>{var s;console.log(e.data.submission_infos),(null==(s=e.data)?void 0:s.submission_infos)&&e.data.submission_infos.length>0?(g(e.data.submission_infos),r(0),F(e.data.submission_infos[0].submission_id||""),q(e.data.submission_infos[0].submission_id||"")):(g([]),F(""),C([]),r(0))},null);let a=s.data.task_status;j(E.indexOf(a))},null))},q=e=>{h(`/task/submitted/${e}/comment`).then(e=>{var s;let a=null==(s=e.data)?void 0:s.comments;a?C(a.reverse()):C([])},null)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"user-submit",style:{display:"flex"},children:[(0,i.jsxs)(eq,{onSwitch:D,taskList:n,loading:c,choice:"user-edit",title:`${y.key}\u{4F5C}\u{4E1A}`,status:v,group:y.value,onSubmit:eE(()=>{2!=v&&f[0]?(console.log(f),x("/task/submitted",{urls:f,assignedTaskID:N}).then(()=>{d.ZP.success("提交成功").then(null,null),D(N)}).catch(()=>{d.ZP.error(`\u{63D0}\u{4EA4}\u{5931}\u{8D25}`).then(null,null)})):f[0]||d.ZP.error("作业内容不能为空").then(null,null)},400),submitDisabled:2==v||(e=>{if(!e)return!1;let s=new Date(e);return new Date>s})($),className:"user-submit-preview-small",deadlineAvailable:!0,button_title:"提交作业",children:[M.length>0&&(0,i.jsx)(_.Z,{options:M,onChange:e=>{0!==p.length&&(console.log(e),F(p[e].submission_id||""),r(e),console.log(p[e].urls))},value:(null==(e=M[l])?void 0:e.value)||(null==(s=M[0])?void 0:s.value),className:"select-version"}),(0,i.jsx)(eS,{className:"inp",type:"file",label:"上传作业",defaultValue:(null==(a=p[l])?void 0:a.urls)||(null==(t=p[0])?void 0:t.urls)||[],disabled:2==v||n&&!n[0].id,onChange:e=>(e=>{if(e&&e[0]){let s=null==e?void 0:e.map(e=>{var s;return(null==e?void 0:e.response)?` https://ossfresh-test.muxixyz.com/${null==e||null==(s=e.response)?void 0:s.key}`:`${e.url}`});b(s?s.filter(e=>"undefined"!=e):[""])}})(e)},l)]}),p.length>0&&(0,i.jsx)(eT,{SubmitId:P,CommentData:Z,className:"user-submit-comment",onCommentSuccess:()=>{P&&q(P)}})]})})},{})}]},{path:"visitor",element:(0,i.jsx)(()=>(0,i.jsx)("div",{className:"visitor-big-wrap",children:(0,i.jsx)("div",{className:"visitor-card",children:(0,i.jsxs)("div",{className:"text-wrap",children:[(0,i.jsx)(ed,{title:"请先提交报名表",className:"visitor-title"}),(0,i.jsx)(ed,{title:"选择自己喜欢的组别后再来吧QWQ~~"})]})})}),{})}]},{path:"review",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)({grade:"",group:Z.Product,school:"",season:S(),status:"",year:new Date().getFullYear()}),[a,t]=(0,m.useState)([]),[l,r]=(0,m.useState)(!1),n=(0,c.s0)();return(0,m.useEffect)(()=>{r(!0),x("/review/",{...e}).then(e=>{let{rows:s}=e.data;t(s),r(!1)}).catch(e=>{10003===Number(e.message)?d.ZP.error("您无此权限，请退出！").then(()=>{n("/app")}):(d.ZP.error("获取审阅列表失败，请稍后重试"),console.error(e))})},[e]),(0,i.jsxs)("div",{className:"reviewContent",children:[(0,i.jsxs)("div",{className:"reviewGroup",children:[(0,i.jsx)($,{changeYear:e=>{e&&s(s=>({...s,year:Number(e.slice(0,4)),season:e.slice(4)}))}}),(0,i.jsx)(M,{reviewFilter:e,changeGroup:e=>{s(s=>({...s,group:e}))}})]}),(0,i.jsx)("div",{className:"reviewList",children:(0,i.jsx)(z,{reviewList:a,loading:l})})]})},{})},{path:"authority-manage",element:(0,i.jsx)(()=>{let[e,s]=(0,m.useState)([]),[a,t]=(0,m.useState)([]),[l,r]=(0,m.useState)([]),[n,o]=(0,m.useState)(!1),u=(0,c.s0)(),v=(e,s,a)=>{o(!0),h(`/users/admin-list?user_type=${e}`).then(e=>{let{list:a}=e.data;null===a?s([]):s(a),o(!1)}).catch(e=>{10003===Number(e.message)?d.ZP.error("您无此权限，请退出！").then(()=>{u("/app")}):(d.ZP.error(`\u{83B7}\u{53D6}${a}\u{5217}\u{8868}\u{5931}\u{8D25}\u{FF0C}\u{8BF7}\u{7A0D}\u{540E}\u{91CD}\u{8BD5}`),console.error(e))})},[j,p]=(0,m.useState)(!1);(0,m.useEffect)(()=>{v("super_admin",s,"超级管理员"),v("admin",t,"管理员"),v("normal",r,"普通用户")},[j]);let g=(e,s,a)=>{x("/users/type",{email:e,user_type:s}).then(e=>{-1==e.code?d.ZP.error(`\u{8BF7}\u{68C0}\u{67E5}\u{90AE}\u{7BB1}\u{662F}\u{5426}\u{6B63}\u{786E}`):(d.ZP.success(`\u{8BBE}\u{7F6E}${a}\u{6210}\u{529F}`),p(!j))},e=>{d.ZP.error(`\u{8BBE}\u{7F6E}${a}\u{5931}\u{8D25}\u{FF0C}\u{8BF7}\u{7A0D}\u{540E}\u{91CD}\u{8BD5}`),console.error(e)})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"authorityManageBox",children:(0,i.jsxs)("div",{className:"authorityManage",children:[(0,i.jsx)(k,{header:"超级管理员",dataSource:e,user_type:"super_admin",loading:n,changeUserIdentity:g}),(0,i.jsx)(k,{header:"管理员",dataSource:a,user_type:"admin",loading:n,changeUserIdentity:g}),(0,i.jsx)(k,{header:"普通成员",dataSource:l,user_type:"normal",loading:n,changeUserIdentity:g})]})})})},{})}]}]);n.createRoot(document.getElementById("root")).render((0,i.jsx)(function(){return(0,i.jsx)(B.ZP,{theme:{token:{colorPrimary:"#ffb841",borderRadius:10}},children:(0,i.jsx)(o.pG,{router:sc})})},{}))}},s={};function a(t){var l=s[t];if(void 0!==l)return l.exports;var r=s[t]={exports:{}};return e[t].call(r.exports,r,r.exports,a),r.exports}a.m=e,a.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return a.d(s,{a:s}),s},(()=>{var e,s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(t,l){if(1&l&&(t=this(t)),8&l||"object"==typeof t&&t&&(4&l&&t.__esModule||16&l&&"function"==typeof t.then))return t;var r=Object.create(null);a.r(r);var i={};e=e||[null,s({}),s([]),s(s)];for(var n=2&l&&t;"object"==typeof n&&!~e.indexOf(n);n=s(n))Object.getOwnPropertyNames(n).forEach(e=>{i[e]=()=>t[e]});return i.default=()=>t,a.d(r,i),r}})(),a.d=(e,s)=>{for(var t in s)a.o(s,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},a.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),a.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];a.O=(s,t,l,r)=>{if(t){r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[t,l,r];return}for(var n=1/0,i=0;i<e.length;i++){for(var[t,l,r]=e[i],o=!0,c=0;c<t.length;c++)(!1&r||n>=r)&&Object.keys(a.O).every(e=>a.O[e](t[c]))?t.splice(c--,1):(o=!1,r<n&&(n=r));if(o){e.splice(i--,1);var d=l();void 0!==d&&(s=d)}}return s}})(),(()=>{var e={980:0};a.O.j=s=>0===e[s];var s=(s,t)=>{var l,r,[i,n,o]=t,c=0;if(i.some(s=>0!==e[s])){for(l in n)a.o(n,l)&&(a.m[l]=n[l]);if(o)var d=o(a)}for(s&&s(t);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},t=self.webpackChunkmuxi_fresh_fe_2_0=self.webpackChunkmuxi_fresh_fe_2_0||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var t=a.O(void 0,["361","118","283"],function(){return a(7622)});t=a.O(t)})();